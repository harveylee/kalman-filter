var kalmanFilter;(()=>{var t={73(t,r,e){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);i&&!("get"in i?!r.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),i=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&n(r,t,e);return i(r,t),r},a=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||n(r,t,e)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.projectObservation=r.covarianceToCorrelation=r.correlationToCovariance=r.checkCovariance=r.State=r.getCovariance=r.KalmanFilter=void 0;const u=o(e(929)),c=o(e(6195)),l=o(e(2320));function f(t){return t===t.toLowerCase()?t:t.replaceAll(/[A-Z]/g,t=>"-"+t.toLowerCase())}Object.keys(c).forEach(t=>{u.registerDynamic(f(t),c[t])}),Object.keys(l).forEach(t=>{u.registerObservation(f(t),l[t])}),a(e(929),r),a(e(6195),r),a(e(2320),r);var h=e(4396);Object.defineProperty(r,"KalmanFilter",{enumerable:!0,get:function(){return s(h).default}});var d=e(1613);Object.defineProperty(r,"getCovariance",{enumerable:!0,get:function(){return s(d).default}});var m=e(6760);Object.defineProperty(r,"State",{enumerable:!0,get:function(){return s(m).default}});var y=e(1601);Object.defineProperty(r,"checkCovariance",{enumerable:!0,get:function(){return s(y).default}});var v=e(3887);Object.defineProperty(r,"correlationToCovariance",{enumerable:!0,get:function(){return s(v).default}});var p=e(3499);Object.defineProperty(r,"covarianceToCorrelation",{enumerable:!0,get:function(){return s(p).default}});var b=e(2477);Object.defineProperty(r,"projectObservation",{enumerable:!0,get:function(){return s(b).default}})},143(t){"use strict";function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t.exports=function(){for(var t=this._matrix,e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.size(),2),n=e[0],i=e[1],o="",a=0;a<n;a++){for(var s=0;s<i;s++)o+=t[a][s].toString(),s!==i-1&&(o+=" ");a!==n-1&&(o+="\n")}return o}},188(t,r,e){const n=e(6376),i=e(8739);t.exports=function(t,r){if(t.length!==r.length)throw new Error("The lengths of the vectors do not match");const e=i(t)*i(r);return 0===e?0:n(t,r)/e}},225(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579),o=i.INVALID_ROW_COL,a=i.OVERFLOW_COLUMN,s=i.INVALID_MATRIX;t.exports=function(t,r){if(!(t instanceof this))throw new Error(s);if(!Number.isInteger(r)||r<0)throw new Error(o);var e,i,u=(e=t.size(),i=2,function(t){if(Array.isArray(t))return t}(e)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(e,i)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1];if(r>=l)throw new Error(a);var f=t._matrix;return this.generate(c,1,function(t){return f[t][r]})}},254(t,r,e){const n=e(8892);t.exports=function(t){let r=0;for(const e of t)r+=n(e);return r}},287(t){t.exports=function(t,r){return t[0].map((e,n)=>e.map((e,i)=>{const o=t.map(t=>t[n][i]);return r(o,n,i)}))}},322(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=e(2579),a=o.SIZE_INCOMPATIBLE,s=o.INVALID_MATRIX;t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))throw new Error(s);var e=n(t.size(),2),i=e[0],o=e[1],u=n(r.size(),2),c=u[0],l=u[1];if(i!==c||o!==l)throw new Error(a);var f=t._matrix,h=r._matrix;return this.generate(i,o,function(t,r){return f[t][r]-h[t][r]})}},341(t,r){"use strict";function e(t){if(void 0===t)return"undefined";let r="";return r="function"==typeof t?t.toString():JSON.stringify(t),r.length<100?r:r.slice(0,97)+"..."}Object.defineProperty(r,"__esModule",{value:!0});class n{constructor(){throw new Error("do not constuct me")}dummy(){}static assertNotArray(t,r="parameter"){if(Array.isArray(t))throw new TypeError(`E001 ${r} cannot be an array. current value is ${e(t)}.`)}static assertIsArray2D(t,r="parameter"){if(!Array.isArray(t))throw new TypeError(`E002 ${r} is not an array. current value is ${e(t)}.`);if(0!==t.length&&!Array.isArray(t[0]))throw new TypeError(`E003 ${r} must be an array of array. current value is ${e(t)}.`)}static assertIsArray2DOrFnc(t,r="parameter"){"function"!=typeof t&&n.assertIsArray2D(t,r)}static assertIsNumbersArray(t,r="parameter"){if("number"!=typeof t){if(!n.isArray(t))throw new TypeError(`E004 ${r} is not an array. current value is ${e(t)}.`);if(0!==t.length&&"number"!=typeof t[0]){if(!n.isArray(t[0]))throw new TypeError(`E005 ${r} is not an array of array. current value is ${e(t)}.`);if("number"!=typeof t[0][0])throw new TypeError(`E006 ${r} is not an array of array of number. current value is ${e(t)}.`)}}}static isArray2D(t){return!!Array.isArray(t)&&Array.isArray(t[0])}static isArray1D(t){return!!Array.isArray(t)&&"number"==typeof t[0]}static isArray(t){return!!Array.isArray(t)}static isFunction(t){return"function"==typeof t}}r.default=n},374(t){t.exports=function(t,r){if(t.length!==r.length)throw new Error("Invalid array lengths");if(!Array.isArray(t))throw console.log({array1:t}),new Error("Invalid array");const e=t.map((t,e)=>t-r[e]).map(t=>t*t);return Math.sqrt(e.reduce((t,r)=>t+r))}},471(t){t.exports=function(t){const r=[];for(let e=0;e<t;e++){const n=[];for(let r=0;r<t;r++)e===r?n.push(1):n.push(0);r.push(n)}return r}},558(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(6760)),a=n(e(8981)),s=n(e(341)),u={info:(...t)=>console.log(...t),debug(){},warn:(...t)=>console.log(...t),error:(...t)=>console.log(...t)};r.default=class{dynamic;observation;logger;constructor(t){const{dynamic:r,observation:e,logger:n=u}=t;this.dynamic=r,this.observation=e,this.logger=n}getValue(t,r){return"function"==typeof t?t(r):t}getInitState(){const{mean:t,covariance:r,index:e}=this.dynamic.init,n=new o.default({mean:t,covariance:r,index:e});return o.default.check(n,{title:"dynamic.init"}),n}getPredictedCovariance(t={}){let{previousCorrected:r,index:e}=t;r||=this.getInitState();const n={previousCorrected:r,index:e,...t},o=this.getValue(this.dynamic.transition,n);(0,a.default)(o,[this.dynamic.dimension,this.dynamic.dimension],"dynamic.transition");const s=(0,i.transpose)(o),u=(0,i.matMul)(o,r.covariance),c=(0,i.matMul)(u,s),l=this.getValue(this.dynamic.covariance,n),f=(0,i.add)(l,c);return(0,a.default)(f,[this.dynamic.dimension,this.dynamic.dimension],"predicted.covariance"),f}predictMean(t){const r=this.predictMeanWithoutControl(t);if(!this.dynamic.constant)return r;const{opts:e}=t,n=this.dynamic.constant(e);return(0,a.default)(n,[this.dynamic.dimension,1],"dynamic.constant"),(0,i.add)(r,n)}predictMeanWithoutControl(t){const{opts:r,transition:e}=t;if(this.dynamic.fn)return this.dynamic.fn(r);const{previousCorrected:n}=r;return(0,i.matMul)(e,n.mean)}predict(t={}){let{previousCorrected:r,index:e}=t;r||=this.getInitState(),"number"!=typeof e&&"number"==typeof r.index&&(e=r.index+1),o.default.check(r,{dimension:this.dynamic.dimension});const n={...t,previousCorrected:r,index:e},i=this.getValue(this.dynamic.transition,n),a=this.predictMean({transition:i,opts:n}),s=this.getPredictedCovariance(n),u=new o.default({mean:a,covariance:s,index:e});if(this.logger.debug("Prediction done",u),Number.isNaN(u.mean[0][0]))throw new TypeError("nan");return u}getGain(t){let{predicted:r,stateProjection:e}=t;const n={index:r.index,...t};s.default.assertIsArray2DOrFnc(this.observation.stateProjection,"CoreKalmanFilter.getGain"),e||=this.getValue(this.observation.stateProjection,n);const o=this.getValue(this.observation.covariance,n);(0,a.default)(o,[this.observation.dimension,this.observation.dimension],"observation.covariance");const u=(0,i.transpose)(e);(0,a.default)(e,[this.observation.dimension,this.dynamic.dimension],"observation.stateProjection");const c=(0,i.matMul)((0,i.matMul)(e,r.covariance),u),l=(0,i.add)(c,o);return(0,i.matMul)((0,i.matMul)(r.covariance,u),(0,i.invert)(l))}getCorrectedCovariance(t){let{predicted:r,optimalKalmanGain:e,stateProjection:n}=t;const o=(0,i.identity)(r.covariance.length);if(!n){s.default.assertIsArray2D(this.observation.stateProjection,"CoreKalmanFilter.getCorrectedCovariance");const e={index:r.index,...t};n=this.getValue(this.observation.stateProjection,e)}return e||=this.getGain({stateProjection:n,...t}),(0,i.matMul)((0,i.subtract)(o,(0,i.matMul)(e,n)),r.covariance)}getPredictedObservation(t){const{opts:r,stateProjection:e}=t;if(this.observation.fn)return this.observation.fn(r);const{predicted:n}=r;return(0,i.matMul)(e,n.mean)}correct(t){const{predicted:r,observation:e}=t;if(o.default.check(r,{dimension:this.dynamic.dimension}),!e)throw new Error("no measure available");const n={observation:e,predicted:r,index:r.index,...t};s.default.assertIsArray2DOrFnc(this.observation.stateProjection,"CoreKalmanFilter.correct");const a=this.getValue(this.observation.stateProjection,n),u=this.getGain({predicted:r,stateProjection:a,...t}),c=(0,i.subtract)(e,this.getPredictedObservation({stateProjection:a,opts:n})),l=(0,i.add)(r.mean,(0,i.matMul)(u,c));if(Number.isNaN(l[0][0]))throw console.log({optimalKalmanGain:u,innovation:c,predicted:r}),new TypeError("Mean is NaN after correction");const f=this.getCorrectedCovariance({predicted:r,optimalKalmanGain:u,stateProjection:a,...t}),h=new o.default({mean:l,covariance:f,index:r.index});return this.logger.debug("Correction done",h),h}}},656(t,r,e){"use strict";var n=e(9583);t.exports=function(t,r,e){var i=n(t,r);if(0===t||0===r)return new this([]);for(var o=0;o<t;o++)for(var a=0;a<r;a++)i[o][a]=e(o,a);return new this(i)}},674(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(8065));r.default=function(t,r){const{typicalTimes:e}=t;if(!Array.isArray(e))throw new TypeError("typicalTimes must be defined");const n=(0,o.default)(t,r),{dimension:a,init:s}=n;if(e.length!==a)throw new TypeError(`typicalTimes (${e.length}) length is not as expected (${a})`);const u=function({ratios:t,aMat:r,bMat:e}){return(0,i.elemWise)([r,e],([r,e],n,i)=>{const o=n===i?t[n]:(t[n]+t[i])/2;return o*r+(1-o)*e})};return{dimension:a,init:s,transition(t){const r=n.transition(t),{getTime:o,index:a,previousCorrected:c}=t,l=o(a)-o(c.index),f=e.map(t=>Math.exp(-1*l/t)),h=(0,i.diag)((0,i.elemWise)([s.mean,c.mean],([t,r])=>{return n=r,0===(e=t)?0:0===n?1:e/n;var e,n}).reduce((t,r)=>t.concat(r)));return u({ratios:f,aMat:r,bMat:h})},covariance(t,r){const{getTime:i,index:o,previousCorrected:a}=t,c=i(o)-i(a.index),l=e.map(t=>Math.exp(-1*c/t)),f=n.covariance(t);return u({ratios:l,aMat:f,bMat:s.covariance})}}}},680(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(9583),o=e(2579),a=o.INVALID_MATRIX,s=o.INVALID_LOWER_TRIANGULAR_MATRIX,u=o.INVALID_SQUARE_MATRIX,c=o.SIZE_INCOMPATIBLE,l=o.NO_UNIQUE_SOLUTION;t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))throw new Error(a);if(!t.isLowerTriangular())throw new Error(s);if(!t.isSquare())throw new Error(u);var e=t.size()[0],o=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.size(),2),f=o[0],h=o[1],d=t._matrix,m=r._matrix;if(e!==f||1!==h)throw new Error(c);for(var y=1/(2*Math.pow(10,t._digit)),v=0;v<e;v++)if(Math.abs(d[v][v])<y)throw new Error(l);for(var p=i(e,1),b=0;b<e;b++){for(var g=0,w=0;w<b;w++)g+=p[w][0]*d[b][w];p[b][0]=(m[b][0]-g)/d[b][b]}return new this(p)}},838(t){"use strict";t.exports=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;if(!(t instanceof this&&r instanceof this))return!1;if(!Number.isInteger(e)||e<0)throw new Error("Invalid argument: Expected a non-negative integer digit");var n=1/(2*Math.pow(10,e)),i=t.getReal(),o=t.getImaginary(),a=r.getReal(),s=r.getImaginary();return!!(Number.isNaN(i)&&Number.isNaN(o)&&Number.isNaN(a)&&Number.isNaN(s))||Math.abs(i-a)<n&&Math.abs(o-s)<n}},929(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.buildDynamic=r.buildObservation=r.registerDynamic=r.registerObservation=void 0;const e={},n={};r.registerObservation=function(t,r){e[t]=r},r.registerDynamic=function(t,r){n[t]=r},r.buildObservation=function(t){if("function"!=typeof e[t.name])throw new TypeError(`The provided observation model name (${t.name}) is not registered`);return e[t.name](t)},r.buildDynamic=function(t,r){if("function"!=typeof n[t.name])throw new TypeError(`The provided dynamic model (${t.name}) name is not registered`);return n[t.name](t,r)}},1090(t,r,e){"use strict";var n=e(2579).SIZE_INCOMPATIBLE;t.exports=function(t,r,e){if(r*e!==t.length)throw new Error(n);return this.generate(r,e,function(r,n){return t[r*e+n]})}},1321(t){"use strict";t.exports=function(t){return this.generate(t,t,function(t,r){return t===r?1:0})}},1394(t){t.exports=function(t,r){return new Array(t).fill(1).map(()=>new Array(r).fill(0))}},1438(t){"use strict";t.exports=function(){return this.re}},1454(t,r,e){"use strict";var n=e(2579),i=n.INVALID_MATRIX,o=n.INVALID_SQUARE_MATRIX,a=n.INVALID_EXPONENT;t.exports=function(t,r){if(!(t instanceof this))throw new Error(i);if(!t.isSquare())throw new Error(o);if(!Number.isInteger(r)||r<0)throw new Error(a);var e=t.size()[0];if(0===r)return this.identity(e);if(1===r)return this.clone(t);if(r%2==0){var n=this.pow(t,r/2);return this.multiply(n,n)}var s=this.pow(t,(r-1)/2);return this.multiply(this.multiply(s,s),t)}},1573(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(929);r.default=function({perName:t},r){const{observedProjection:e}=r,i=e[0].length,o=Object.keys(t),a={};let s=i,u=0;o.forEach(e=>{const i=t[e].obsDynaIndexes;if("string"==typeof t[e].name&&t[e].name!==e)throw new Error(`${t[e].name} and "${e}" should match`);t[e].name=e;const{dimension:o,transition:c,covariance:l,init:f}=(0,n.buildDynamic)(t[e],r),h=[];for(let t=0;t<o;t++){let r;if(t<i.length){if(r=u,r!==i[t])throw new Error("thsoe should match");u++}else r=s,s++;h.push(r)}a[e]={dynamicIndexes:h,transition:c,dimension:o,covariance:l,init:f}});const c=o.map(t=>a[t].dimension).reduce((t,r)=>t+r,0);if(s!==c)throw new Error("miscalculation of transition");const l={index:-1,mean:new Array(c),covariance:new Array(c).fill(0).map(()=>new Array(c).fill(0))};return o.forEach(t=>{const{dynamicIndexes:r,init:e}=a[t];if("object"!=typeof e)throw new TypeError("Init is mandatory");r.forEach((t,n)=>r.forEach((r,i)=>{l.covariance[t][r]=e.covariance[n][i]})),r.forEach((t,r)=>{l.mean[t]=e.mean[r]})}),{dimension:c,init:l,transition(t){const{previousCorrected:r}=t,e=new Array(c).fill(void 0).map(()=>new Array(c).fill(0));return o.forEach(n=>{const{dynamicIndexes:i,transition:o}=a[n],s=o({...t,previousCorrected:r.subState(i)});i.forEach((t,r)=>i.forEach((n,i)=>{e[t][n]=s[r][i]}))}),e},covariance(t){const{previousCorrected:r}=t,e=new Array(c).fill(void 0).map(()=>new Array(c).fill(0));return o.forEach(n=>{const{dynamicIndexes:i,covariance:o}=a[n],s=o({...t,previousCorrected:r.subState(i)});i.forEach((t,r)=>i.forEach((n,i)=>{e[t][n]=s[r][i]}))}),e}}}},1601(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e(2769)),o=n(e(8981));r.default=function(t,r){const{covariance:e,eigen:n=!1}=t;(0,o.default)(e),function(t,r="checkSymetric"){for(const[e,n]of t.entries())for(const[i,o]of n.entries()){if(e===i&&o<0)throw new Error(`[${r}] Variance[${i}] should be positive (actual: ${o})`);if(Math.abs(o)>Math.sqrt(t[e][e]*t[i][i]))throw console.log(t),new Error(`[${r}] Covariance[${e}][${i}] should verify Cauchy Schwarz Inequality (expected: |x| <= sqrt(${t[e][e]} * ${t[i][i]}) actual: ${o})`);if(Math.abs(o-t[i][e])>.1)throw new Error(`[${r}] Covariance[${e}][${i}] should equal Covariance[${i}][${e}]  (actual diff: ${Math.abs(o-t[i][e])})  = ${o} - ${t[i][e]}\n${t.join("\n")} is invalid`)}}(e),n&&function(t,r=1e-10){const e=new i.default(t).eigenvalues();for(const n of e)if(n<=-r)throw console.log(t,n),new Error(`Eigenvalue should be positive (actual: ${n})`);console.log("is definite positive",t)}(e)}},1611(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t,{label:r=""}={}){if("function"==typeof t)return t;if(Array.isArray(t))return t;throw new Error(`${null===r?"":r+" : "}Only arrays and functions are authorized (got: "${t}")`)}},1613(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function({measures:t,averages:r}){const e=t.length,n=t[0].length;if(0===e)throw new Error("Cannot find covariance for empty sample");return new Array(n).fill(1).map((i,o)=>new Array(n).fill(1).map((n,i)=>{const a=t.map((t,e)=>(t[o]-r[e][o])*(t[i]-r[e][i])).reduce((t,r)=>t+r)/e;if(Number.isNaN(a))throw new TypeError("result is NaN");return a}))}},1628(t){"use strict";t.exports=function(t,r){return t instanceof this&&("number"==typeof r||r instanceof this)?"number"==typeof r?!Number.isFinite(r)||Number.isNaN(r)?this.NaN:0===r?this.ONE:this.isEqual(t,this.ZERO)?this.ZERO:this.exp(this.multiply(new this(r,0),this.log(t))):r instanceof this?this.exp(this.multiply(r,this.log(t))):this.NaN:this.NaN}},1636(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673);r.default=function({staticCovariance:t,obsDynaIndexes:r,init:e}){const i=r.length;if(e||={mean:new Array(r.length).fill(0).map(()=>[0]),covariance:(0,n.diag)(new Array(r.length).fill(1e6)),index:-1},t&&t.length!==i)throw new Error("staticCovariance has wrong size");return{dimension:i,transition:()=>(0,n.identity)(i),covariance({previousCorrected:r,index:e}){const o=e-r.index;return t?t.map(t=>t.map(t=>t*o)):(0,n.identity)(i)},init:e}}},1638(t){"use strict";t.exports=function(t){return t instanceof this?this.divide(this.ONE,t):this.NaN}},1678(t){"use strict";t.exports=function(){if(void 0!==this._size)return this._size;var t=this._matrix;return 0===t.length?(this._size=[0,0],this._size):(this._size=[t.length,t[0].length],this._size)}},1700(t){t.exports=function(t,r){const e=[];for(let n=0;n<t.length;n++){e[n]=[];for(let i=0;i<r[0].length;i++){let o=0,a=!1;for(let e=0;e<t[0].length;e++){if(null===t[n][e]&&0!==r[e][i]||null===r[e][i]&&0!==t[n][e]){a=!0;break}o+=t[n][e]*r[e][i]}e[n][i]=a?null:o}}return e}},1826(t){"use strict";t.exports=function(t){return this.subtract(new this(Math.PI/2),this.asin(t))}},1912(t,r,e){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,r){var e=n(t),i=n(r);return"number"===e&&"undefined"===i?Number.isNaN(t)||!Number.isFinite(t)?(this.re=NaN,this.im=NaN,this):(this.re=t,this.im=0,this):"number"===e&&"number"===i?Number.isNaN(t)||Number.isNaN(r)||!Number.isFinite(t)||!Number.isFinite(r)?(this.re=NaN,this.im=NaN,this):(this.re=t,this.im=r,this):(this.re=NaN,this.im=NaN,this)}i.prototype.getReal=e(1438),i.prototype.getImaginary=e(3633),i.prototype.getModulus=e(8837),i.prototype.getArgument=e(9297),i.prototype.toString=e(7852),i.isNaN=e(8239),i.isEqual=e(838),i.conjugate=e(5800),i.inverse=e(1638),i.add=e(9233),i.subtract=e(9780),i.multiply=e(7840),i.divide=e(5141),i.exp=e(5909),i.log=e(9312),i.pow=e(1628),i.sin=e(7940),i.cos=e(3573),i.tan=e(9505),i.csc=e(8457),i.sec=e(5091),i.cot=e(3072),i.asin=e(7163),i.acos=e(1826),i.atan=e(6018),i.acsc=e(9726),i.asec=e(9364),i.acot=e(5259),i.NaN=new i(NaN),i.ONE=new i(1),i.ZERO=new i(0),i.PI=new i(Math.PI),i.E=new i(Math.E),i.EPSILON=1/(2*Math.pow(10,15)),t.exports=i},1992(t,r,e){"use strict";var n=e(2769),i=e(3217),o=e(2579),a=o.INVALID_ARRAY,s=o.EXPECTED_ARRAY_OF_NUMBERS_OR_MATRICES,u=o.INVALID_SQUARE_MATRIX;t.exports=function(t){if(!Array.isArray(t))throw new Error(a);for(var r,e=t.length,o=0;o<e;o++){var c=t[o];if(!(i(c)||c instanceof n))throw new Error(s);if(i(c)){if(!r){r="number";continue}if("number"!==r)throw new Error(s)}else{if(!c.isSquare())throw new Error(u);if(!r){r="square";continue}if("square"!==r)throw new Error(s)}}if("number"===r)return n.generate(e,e,function(r,e){return r===e?t[r]:0});for(var l=0,f=new Array(e),h=0;h<e;h++){var d=t[h].size()[0];l+=d,f[h]=d}var m=0,y=0,v=f[m];return n.generate(l,l,function(r,e){r-y===v&&e-y===v&&(y+=v,m++);var n=r-y,i=e-y;for(v=f[m];0===v;)m++,v=f[m];return n<v&&n>=0&&i<v&&i>=0?t[m]._matrix[n][i]:0})}},2058(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){const{observation:r,dimension:e}=t;if(!Array.isArray(r)){if(1===e&&"number"==typeof r)return[[r]];throw new TypeError(`The observation (${r}) should be an array (dimension: ${e})`)}if(r.length!==e)throw new TypeError(`Observation (${r.length}) and dimension (${e}) not matching`);return"number"==typeof r[0]||null===r[0]?r.map(t=>[t]):r}},2097(t,r,e){const n=e(287);t.exports=function(...t){return n(t,([t,r])=>t-r)}},2320(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.sensorProjected=r.sensorLocalVariance=r.sensor=void 0;var i=e(6420);Object.defineProperty(r,"sensor",{enumerable:!0,get:function(){return n(i).default}});var o=e(8940);Object.defineProperty(r,"sensorLocalVariance",{enumerable:!0,get:function(){return n(o).default}});var a=e(5373);Object.defineProperty(r,"sensorProjected",{enumerable:!0,get:function(){return n(a).default}})},2477(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673);r.default=function({observation:t,obsIndexes:r,selectedStateProjection:e,invertSelectedStateProjection:i}){if(!t)return null;const o=t.observation||t,a=r.map(e=>{if(void 0===o[e])throw new TypeError(`obsIndexes (${r}) is not matching with observation (${t})`);return[o[e]]}),s=i||(0,n.invert)(e);if(null===s)throw new Error("selectedStateProjection is not invertible, please provide invertSelectedStateProjection");return(0,n.matMul)(s,a).map(t=>t[0]).map(t=>{if(Number.isNaN(t))throw new TypeError("NaN in projection");return t})}},2579(t){"use strict";t.exports={INVALID_ARRAY:"Invalid argument: Received a non-array argument",INVALID_MATRIX:"Invalid argument: Received an invalid matrix",INVALID_SQUARE_MATRIX:"Invalid argument: Received a non-square matrix",INVALID_UPPER_TRIANGULAR_MATRIX:"Invalid argument: Received a non upper-triangular matrix",INVALID_LOWER_TRIANGULAR_MATRIX:"Invalid argument: Received a non lower-triangular matrix",INVALID_EXPONENT:"Invalid argument: Expected a non-negative integer exponent",INVALID_ROW_COL:"Invalid argument: Expected non-negative integer row and column",INVALID_ROW:"Invalid argument: Expected non-negative integer row",INVALID_COLUMN:"Invalid argument: Expected non-negative integer column",INVALID_ROWS_EXPRESSION:"Invalid argument: Received invalid rows expression",INVALID_COLUMNS_EXPRESSION:"Invalid argument: Received invalid columns expression",INVALID_P_NORM:"Invalid argument: Received invalid p-norm",OVERFLOW_INDEX:"Invalid argument: Matrix index overflow",OVERFLOW_COLUMN:"Invalid argument: Column index overflow",OVERFLOW_ROW:"Invalid argument: Row index overflow",NO_UNIQUE_SOLUTION:"Arithmetic Exception: The system has no unique solution",SIZE_INCOMPATIBLE:"Invalid argument: Matrix size-incompatible",SINGULAR_MATRIX:"Arithmetic Exception: The matrix is not invertible",EXPECTED_STRING_NUMBER_AT_POS_1_2:"Invalid argument: Expected a string or a number at arguments[1] and arguments[2]",EXPECTED_ARRAY_OF_NUMBERS_OR_MATRICES:"Invalid argument: Expected either an array of numbers or an array of square matrices"}},2678(t){t.exports=function({matrix:t,outputSize:r,rowIndexes:e,colIndexes:n}){const[i,o]=r;if(!Array.isArray(e))throw new TypeError(`Invalid rowIndexes ${e}`);if(!Array.isArray(n))throw new TypeError(`Invalid colIndexes ${n}`);return new Array(i).fill(0).map((r,i)=>new Array(o).fill(0).map((r,o)=>n.includes(o)&&e.includes(i)?t[e.indexOf(i)][n.indexOf(o)]:0))}},2769(t,r,e){"use strict";var n=e(3773),i=e(2579).INVALID_MATRIX;function o(t){if(!n(t))throw new Error(i);this._matrix=t,this._digit=8}t.exports=o,o.prototype.isDiagonal=e(7748),o.prototype.isSkewSymmetric=e(4558),o.prototype.isSquare=e(9180),o.prototype.isSymmetric=e(8856),o.prototype.isLowerTriangular=e(9587),o.prototype.isUpperTriangular=e(7570),o.prototype.isOrthogonal=e(2924),o.prototype.cond=e(2947),o.prototype.det=e(6050),o.prototype.eigenvalues=e(6405),o.prototype.nullity=e(4844),o.prototype.norm=e(8125),o.prototype.rank=e(4621),o.prototype.size=e(1678),o.prototype.trace=e(4710),o.add=e(8339),o.inverse=e(6080),o.multiply=e(3374),o.pow=e(1454),o.subtract=e(322),o.transpose=e(8279),o.backward=e(3416),o.forward=e(680),o.solve=e(6666),o.LU=e(5019),o.QR=e(3719),o.clone=e(9042),o.column=e(225),o.diag=e(1992),o.elementwise=e(8987),o.generate=e(656),o.getDiag=e(7212),o.getRandomMatrix=e(9461),o.identity=e(1321),o.isEqual=e(5027),o.row=e(7759),o.submatrix=e(4080),o.zero=e(7289),o.fromArray=e(1090),o.prototype.flatten=e(9573),o.prototype.entry=e(4927),o.prototype.toString=e(143)},2834(t){t.exports=function(t){return t[0].map((r,e)=>t.map(t=>t[e]))}},2924(t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._digit;if(void 0!==this._isOrthogonal)return this._isOrthogonal;if(!this.isSquare())return this._isOrthogonal=!1,!1;for(var r=this._matrix,e=1/(2*Math.pow(10,t)),n=r.length,i=0;i<n;i++)for(var o=i;o<n;o++){for(var a=0,s=0;s<n;s++)a+=r[i][s]*r[o][s];if(i===o&&Math.abs(a-1)>=e)return this._isOrthogonal=!1,!1;if(i!==o&&Math.abs(a)>=e)return this._isOrthogonal=!1,!1}return this._isOrthogonal=!0,!0}},2947(t,r,e){"use strict";var n=e(2769),i=e(2579),o=i.INVALID_P_NORM,a=i.SINGULAR_MATRIX,s=i.INVALID_SQUARE_MATRIX;t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;if(1!==t&&2!==t&&t!==1/0&&"F"!==t)throw new Error(o);if(!this.isSquare())throw new Error(s);try{return n.inverse(this).norm(t)*this.norm(t)}catch(t){if(t.message===a)return 1/0;throw t}}},3029(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(8981)),a=n(e(341));r.default=function(t,r={}){const{dimension:e,title:n="polymorph"}=r;if("number"==typeof t||Array.isArray(t)){if("number"==typeof t&&"number"==typeof e)return(0,i.diag)(new Array(e).fill(t));if(a.default.isArray2D(t)){let r;return"number"==typeof e&&(r=[e,e]),(0,o.default)(t,r,n),t}if(a.default.isArray1D(t))return(0,i.diag)(t)}return t}},3072(t){"use strict";t.exports=function(t){return this.divide(this.ONE,this.tan(t))}},3217(t){"use strict";t.exports=function(t){return Number.isFinite(t)}},3374(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=e(9583),a=e(2579),s=a.INVALID_MATRIX,u=a.SIZE_INCOMPATIBLE;t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))throw new Error(s);var e=n(t.size(),2),i=e[0],a=e[1],c=n(r.size(),2),l=c[0],f=c[1];if(a!==l)throw new Error(u);for(var h=t._matrix,d=r._matrix,m=o(i,f),y=0;y<i;y++)for(var v=0;v<f;v++){m[y][v]=0;for(var p=0;p<l;p++)m[y][v]+=h[y][p]*d[p][v]}return new this(m)}},3416(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(9583),o=e(2579),a=o.INVALID_MATRIX,s=o.INVALID_UPPER_TRIANGULAR_MATRIX,u=o.INVALID_SQUARE_MATRIX,c=o.SIZE_INCOMPATIBLE,l=o.NO_UNIQUE_SOLUTION;t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))throw new Error(a);if(!t.isUpperTriangular())throw new Error(s);if(!t.isSquare())throw new Error(u);var e=t.size()[0],o=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.size(),2),f=o[0],h=o[1],d=t._matrix,m=r._matrix;if(f!==e||1!==h)throw new Error(c);for(var y=1/(2*Math.pow(10,t._digit)),v=0;v<e;v++)if(Math.abs(d[v][v])<y)throw new Error(l);for(var p=i(e,1),b=e-1;b>=0;b--){for(var g=0,w=b+1;w<e;w++)g+=p[w][0]*d[b][w];p[b][0]=(m[b][0]-g)/d[b][b]}return new this(p)}},3499(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e(1601));r.default=function(t){(0,i.default)({covariance:t});const r=t.map((r,e)=>t[e][e]);return{variance:r,correlation:t.map((t,e)=>t.map((t,n)=>t/Math.sqrt(r[n]*r[e])))}}},3573(t){"use strict";t.exports=function(t){if(!(t instanceof this))return this.NaN;var r=t.getReal(),e=t.getImaginary();return new this(Math.cos(r)*Math.cosh(e),Math.sin(r)*Math.sinh(e)*-1)}},3614(t,r,e){const n=e(1394);t.exports=function(t){const r=n(t.length,t.length);for(const[e,n]of t.entries())r[e][e]=n;return r}},3621(t,r,e){const n=e(3733);t.exports=function(t){return n(t)}},3633(t){"use strict";t.exports=function(){return this.im}},3702(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){const{observation:r,dynamic:e}=t,{stateProjection:n}=r,{transition:i}=e,o=e.dimension,a=r.dimension;if(o&&a&&Array.isArray(n)&&(o!==n[0].length||a!==n.length))throw new TypeError("stateProjection dimensions not matching with observation and dynamic dimensions");if(o&&Array.isArray(i)&&o!==i.length)throw new TypeError("transition dimension not matching with dynamic dimension");return Array.isArray(n)?{observation:{...r,dimension:n.length},dynamic:{...e,dimension:n[0].length}}:Array.isArray(i)?{observation:r,dynamic:{...e,dimension:i.length}}:{observation:r,dynamic:e}}},3719(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579).INVALID_MATRIX;t.exports=function(t){if(!(t instanceof this))throw new Error(i);for(var r=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.size(),2),e=r[0],o=r[1],a=Math.min(e,o),s=1/(2*Math.pow(10,t._digit)),u=this.clone(t)._matrix,c=this.identity(e)._matrix,l=0;l<a;l++){for(var f=!0,h=l+1;h<e;h++)if(Math.abs(u[h][l])>=s){f=!1;break}if(!f){for(var d=0,m=l;m<e;m++)d+=Math.pow(u[m][l],2);d=Math.sqrt(d);var y=-1;u[l][l]<0&&(y=1);for(var v=u[l][l]-y*d,p=new Array(e-l),b=0;b<e-l;b++)p[b]=u[b+l][l]/v;p[0]=1;for(var g=-1*y*v/d,w=new Array(e-l),A=0;A<e-l;A++){for(var _=new Array(o),I=0;I<o;I++)_[I]=u[l+A][I];w[A]=_}for(var M=l;M<e;M++)for(var x=0;x<o;x++){for(var E=0,S=0;S<e-l;S++)E+=w[S][x]*p[S];u[M][x]=w[M-l][x]-g*p[M-l]*E}for(var N=new Array(e),O=0;O<e;O++){for(var j=new Array(e-l),T=0;T<e-l;T++)j[T]=c[O][l+T];N[O]=j}for(var P=0;P<e;P++)for(var R=l;R<e;R++){for(var C=0,D=0;D<e-l;D++)C+=N[P][D]*p[D];c[P][R]=N[P][R-l]-g*p[R-l]*C}}}for(var L=0;L<e;L++)for(var $=0;$<o;$++)L>$&&(u[L][$]=0);return[new this(c),new this(u)]}},3733(t){var r={Matrix:function(){}};r.Matrix.create=function(t){return(new r.Matrix).setElements(t)},r.Matrix.I=function(t){for(var e,n=[],i=t;i--;)for(e=t,n[i]=[];e--;)n[i][e]=i===e?1:0;return r.Matrix.create(n)},r.Matrix.prototype={dup:function(){return r.Matrix.create(this.elements)},isSquare:function(){var t=0===this.elements.length?0:this.elements[0].length;return this.elements.length===t},toRightTriangular:function(){if(0===this.elements.length)return r.Matrix.create([]);var t,e,n,i,o=this.dup(),a=this.elements.length,s=this.elements[0].length;for(e=0;e<a;e++){if(0===o.elements[e][e])for(n=e+1;n<a;n++)if(0!==o.elements[n][e]){for(t=[],i=0;i<s;i++)t.push(o.elements[e][i]+o.elements[n][i]);o.elements[e]=t;break}if(0!==o.elements[e][e])for(n=e+1;n<a;n++){var u=o.elements[n][e]/o.elements[e][e];for(t=[],i=0;i<s;i++)t.push(i<=e?0:o.elements[n][i]-o.elements[e][i]*u);o.elements[n]=t}}return o},determinant:function(){if(0===this.elements.length)return 1;if(!this.isSquare())return null;for(var t=this.toRightTriangular(),r=t.elements[0][0],e=t.elements.length,n=1;n<e;n++)r*=t.elements[n][n];return r},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(t){if(0===this.elements.length)return this.dup();var e=t.elements||t;void 0===e[0][0]&&(e=r.Matrix.create(e).elements);var n,i=this.dup(),o=i.elements[0].length,a=i.elements.length,s=e[0].length;if(a!==e.length)return null;for(;a--;)for(n=s;n--;)i.elements[a][o+n]=e[a][n];return i},inverse:function(){if(0===this.elements.length)return null;if(!this.isSquare()||this.isSingular())return null;for(var t,e,n,i,o,a=this.elements.length,s=a,u=this.augment(r.Matrix.I(a)).toRightTriangular(),c=u.elements[0].length,l=[];s--;){for(n=[],l[s]=[],i=u.elements[s][s],e=0;e<c;e++)o=u.elements[s][e]/i,n.push(o),e>=a&&l[s].push(o);for(u.elements[s]=n,t=s;t--;){for(n=[],e=0;e<c;e++)n.push(u.elements[t][e]-u.elements[s][e]*u.elements[t][s]);u.elements[t]=n}}return r.Matrix.create(l)},setElements:function(t){var r,e,n=t.elements||t;if(n[0]&&void 0!==n[0][0]){for(r=n.length,this.elements=[];r--;)for(e=n[r].length,this.elements[r]=[];e--;)this.elements[r][e]=n[r][e];return this}var i=n.length;for(this.elements=[],r=0;r<i;r++)this.elements.push([n[r]]);return this}},t.exports=function(t){const e=r.Matrix.create(t).inverse();return null!==e?e.elements:null}},3773(t,r,e){"use strict";var n=e(3217);t.exports=function(t){if(!Array.isArray(t))return!1;var r=t.length;if(0===r)return!0;var e=t[0];if(!Array.isArray(e))return!1;var i=e.length;if(0===i)return!1;for(var o=0;o<r;o++){var a=t[o];if(!Array.isArray(a)||a.length!==i)return!1;for(var s=0;s<i;s++)if(!n(a[s]))return!1}return!0}},3887(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e(1601));r.default=function({correlation:t,variance:r}){return(0,i.default)({covariance:t}),t.map((t,e)=>t.map((t,n)=>t*Math.sqrt(r[n]*r[e])))}},4080(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var a=e(2579),s=a.INVALID_MATRIX,u=a.EXPECTED_STRING_NUMBER_AT_POS_1_2,c=a.INVALID_ROW,l=a.INVALID_COLUMN,f=a.OVERFLOW_ROW,h=a.INVALID_ROWS_EXPRESSION,d=a.INVALID_COLUMNS_EXPRESSION,m=a.OVERFLOW_COLUMN;t.exports=function(t,r,e){if(!(t instanceof this))throw new Error(s);var i=o(r),a=o(e);if("string"!==i&&"number"!==i||"string"!==a&&"number"!==a)throw new Error(u);var y,v,p,b,g=n(t.size(),2),w=g[0],A=g[1];if("number"===i){if(!Number.isInteger(r)||r<0)throw new Error(c);if(r>=w)throw new Error(f);y=r,v=r}else{var _=r.split(":");if(2!==_.length)throw new Error(h);var I=n(_,2),M=I[0],x=I[1];if(""===M)y=0;else{var E=Number(M);if(!Number.isInteger(E)||E<0)throw new Error(c);if(E>=w)throw new Error(f);y=E}if(""===x)v=w-1;else{var S=Number(x);if(!Number.isInteger(S)||S<0)throw new Error(c);if(S>=w)throw new Error(f);v=S}if(y>v)throw new Error(h)}if("number"===a){if(!Number.isInteger(e)||e<0)throw new Error(l);if(e>=A)throw new Error(m);p=e,b=e}else{var N=e.split(":");if(2!==N.length)throw new Error(d);var O=n(N,2),j=O[0],T=O[1];if(""===j)p=0;else{var P=Number(j);if(!Number.isInteger(P)||P<0)throw new Error(l);if(P>=A)throw new Error(m);p=P}if(""===T)b=A-1;else{var R=Number(T);if(!Number.isInteger(R)||R<0)throw new Error(l);if(R>=A)throw new Error(m);b=R}if(p>b)throw new Error(d)}for(var C=t._matrix,D=b-p+1,L=new Array(v-y+1),$=y;$<=v;$++){for(var U=new Array(D),V=p;V<=b;V++)U[V-p]=C[$][V];L[$-y]=U}return new this(L)}},4165(t){t.exports=function(t,r){return r.map(e=>r.map(r=>t[e][r]))}},4396(t,r,e){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);i&&!("get"in i?!r.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),i=this&&this.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&n(r,t,e);return i(r,t),r},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const s=e(4673),u=a(e(2058)),c=a(e(3702)),l=a(e(9065)),f=a(e(6341)),h=a(e(8578)),d=a(e(1611)),m=a(e(4967)),y=a(e(3029)),v=a(e(6760)),p=o(e(929)),b=a(e(558)),g=a(e(341));class w extends b.default{constructor(t={}){const r=function(t){const{observation:r,dynamic:e}=t;return g.default.assertNotArray(r,"modelsParametersToCoreOptions: observation"),(0,m.default)(t,{observation:{stateProjection:(0,d.default)((0,y.default)(r.stateProjection),{label:"observation.stateProjection"}),covariance:(0,d.default)((0,y.default)(r.covariance,{dimension:r.dimension}),{label:"observation.covariance"})},dynamic:{transition:(0,d.default)((0,y.default)(e.transition),{label:"dynamic.transition"}),covariance:(0,d.default)((0,y.default)(e.covariance,{dimension:e.dimension}),{label:"dynamic.covariance"})}})}(function(t){let{observation:r,dynamic:e}=t;"object"==typeof r&&null!==r||(r=function(t){return"number"==typeof t?{name:"sensor",sensorDimension:t}:"string"==typeof t?{name:t}:{name:"sensor"}}(r)),"object"==typeof e&&null!==e||(e=function(t){return"string"==typeof t?{name:t}:{name:"constant-position"}}(e)),"string"==typeof r.name&&(r=p.buildObservation(r)),"string"==typeof e.name&&(e=p.buildDynamic(e,r));const n=(0,c.default)({observation:r,dynamic:e}),i=(0,l.default)(n),o=(0,f.default)(i);return(0,h.default)(o)}(t));super({...t,...r})}correct(t){const r=(0,u.default)({observation:t.observation,dimension:this.observation.dimension});return super.correct({...t,observation:r})}filter(t){const r=super.predict(t);return this.correct({...t,predicted:r})}filterAll(t){let r=this.getInitState();const e=[];for(const n of t){const t=this.predict({previousCorrected:r});r=this.correct({predicted:t,observation:n}),e.push(r.mean.map(t=>t[0]))}return e}asymptoticStateCovariance({limitIterations:t=100,tolerance:r=1e-6}={}){let e=super.getInitState();const n=[];for(let i=0;i<t;i++){const t=new v.default({mean:[],covariance:super.getPredictedCovariance({previousCorrected:e})});if(e=new v.default({mean:[],covariance:super.getCorrectedCovariance({predicted:t})}),n.push(e.covariance),(0,s.frobenius)(e.covariance,n[i-1])<r)return n[i]}throw new Error("The state covariance does not converge asymptotically")}asymptoticGain({tolerance:t=1e-6}={}){const r=this.asymptoticStateCovariance({tolerance:t}),e=new v.default({mean:Array.from({length:r.length}).fill(0).map(()=>[0]),covariance:r});return super.getGain({predicted:e})}}r.default=w},4558(t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._digit;if(void 0!==this._isSkewSymmetric)return this._isSkewSymmetric;if(!this.isSquare())return this._isSkewSymmetric=!1,!1;var r=this._matrix,e=1/(2*Math.pow(10,t)),n=r.length;if(0===n)return this._isSkewSymmetric=!0,!0;for(var i=0;i<n;i++)for(var o=0;o<i;o++)if(Math.abs(r[i][o]+r[o][i])>=e)return this._isSkewSymmetric=!1,!1;return this._isSkewSymmetric=!0,!0}},4594(t,r,e){const n=e(471);t.exports=function({blocks:t,order:r=null}){const e=t.map(t=>t.length).reduce((t,r)=>t+r,0),i=n(e);let o=0;for(const r of t){for(const[t]of r.entries())for(const[e]of r.entries())i[t+o][e+o]=r[t][e];o+=r.length}return r?r.map(t=>r.map(r=>i[t][r])):i}},4621(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2769);t.exports=function(){if(void 0!==this._rank)return this._rank;var t=1/(2*Math.pow(10,this._digit)),r=i.QR(this)[1],e=r._matrix,o=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.size(),2),a=o[0],s=o[1];if(0===a)return this._rank=1,1;for(var u=0,c=0;c<a;c++)for(var l=c;l<s;l++)if(Math.abs(e[c][l])>=t){u++;break}return this._rank=u,u}},4673(t,r,e){t.exports=e(9801)},4710(t,r,e){"use strict";var n=e(2579).INVALID_SQUARE_MATRIX;t.exports=function(){if(!(void 0!==this._isSquare?this._isSquare:this.isSquare()))throw new Error(n);if(void 0!==this._trace)return this._trace;for(var t=this._matrix,r=t.length,e=0,i=0;i<r;i++)e+=t[i][i];return this._trace=e,e}},4825(t){t.exports=function(t,r){return t.map((t,e)=>t.map((t,n)=>r(t,e,n)))}},4844(t){"use strict";t.exports=function(){if(void 0!==this._nullity)return this._nullity;var t=this.size()[1],r=this.rank();return this._nullity=t-r,this._nullity}},4927(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579),o=i.INVALID_ROW_COL,a=i.OVERFLOW_INDEX;t.exports=function(t,r){if(!Number.isInteger(t)||t<0||!Number.isInteger(r)||r<0)throw new Error(o);var e,i,s=this._matrix,u=(e=this.size(),i=2,function(t){if(Array.isArray(t))return t}(e)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(e,i)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1];if(t>=c||r>=l)throw new Error(a);return s[t][r]}},4965(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673);r.default=function(t,r){const e=t.timeStep||1,{observedProjection:i}=r,{stateProjection:o}=r,a=r.dimension;let s;if(o&&Number.isInteger(o[0].length/2))s=r.stateProjection[0].length;else if(i)s=2*i[0].length;else{if(!a)throw new Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");s=2*a}const u=s/2,c=(0,n.identity)(s);for(let t=0;t<u;t++)c[t][t+u]=e;const l=new Array(u).fill(1).concat(new Array(u).fill(e*e)),f=t.covariance||l;return{...t,dimension:s,transition:c,covariance:f}}},4967(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e(6306));function o(t,r){if(r>100)throw new Error(`In deepAssign, number of recursive call (${r}) reached limit (100), deepAssign is not working on  self-referencing objects`);const e=t.filter(t=>null!=t),n=e.at(-1);if(1===e.length)return e[0];if("object"!=typeof n||Array.isArray(n))return n;if(0===e.length)return null;const a=e.filter(t=>"object"==typeof t);let s=[];for(const t of a)s=s.concat(Object.keys(t));const u=(0,i.default)(s),c={};for(const t of u){const e=a.map(r=>r[t]);c[t]=o(e,r+1)}return c}r.default=function(...t){return o(t,0)}},5019(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579).INVALID_MATRIX;function o(t,r,e,n,i){for(var o=Math.min(e,i),a=e,s=Math.abs(t[r[e]][o]),u=e+1;u<n;u++){var c=Math.abs(t[r[u]][o]);c>s&&(a=u,s=c)}var l=r[e];r[e]=r[a],r[a]=l}t.exports=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof this))throw new Error(i);for(var e=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.size(),2),a=e[0],s=e[1],u=Math.min(a,s),c=1/(2*Math.pow(10,t._digit)),l=function(t){for(var r=new Array(t),e=0;e<t;e++)r[e]=e;return r}(a),f=this.clone(t)._matrix,h=0;h<a-1;h++){var d=Math.min(h,s);o(f,l,d,a,s);var m=l[h],y=f[m][d];if(!(Math.abs(y)<c))for(var v=h+1;v<a;v++){var p=l[v],b=f[p][d];if(Math.abs(b)>=c){for(var g=b/y,w=d;w<s;w++)f[p][w]-=g*f[m][w];f[p][d]=g}}}for(var A=new Array(a),_=0;_<a;_++)A[_]=f[l[_]];if(r)return[l,new this(A)];var I=this.generate(a,a,function(t,r){return r===l[t]?1:0}),M=this.generate(a,u,function(t,r){return t===r?1:t<r?0:A[t][r]}),x=this.generate(u,s,function(t,r){return t>r?0:A[t][r]});return[I,M,x]}},5027(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=e(2579).INVALID_MATRIX;t.exports=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!(t instanceof this&&r instanceof this))throw new Error(o);var i=n(t.size(),2),a=i[0],s=i[1],u=n(r.size(),2),c=u[0],l=u[1];if(a!==c||s!==l)return!1;for(var f=1/(2*Math.pow(10,e)),h=t._matrix,d=r._matrix,m=0;m<a;m++)for(var y=0;y<s;y++)if(Math.abs(h[m][y]-d[m][y])>=f)return!1;return!0}},5091(t){"use strict";t.exports=function(t){return this.divide(this.ONE,this.cos(t))}},5141(t){"use strict";t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))return this.NaN;var e=t.re,n=t.im,i=r.re,o=r.im;if(Math.abs(i)<this.EPSILON&&Math.abs(o)<this.EPSILON)return this.NaN;var a=Math.pow(i,2)+Math.pow(o,2);return new this((e*i+n*o)/a,(n*i-e*o)/a)}},5259(t){"use strict";t.exports=function(t){return this.atan(this.inverse(t))}},5373(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(3887)),a=n(e(3499));r.default=function({selectedCovariance:t,totalDimension:r,obsIndexes:e,selectedStateProjection:n}){if(n){if(n.length!==e.length)throw new Error(`[Sensor-projected] Shape mismatch between ${n.length} and ${e.length}`)}else n=new Array(e.length).fill(0).map(()=>new Array(e.length).fill(0)),e.forEach((t,r)=>{n[r][r]=1});const s=(0,i.identity)(r);e.forEach((r,n)=>{t&&e.forEach((e,i)=>{s[r][e]=t[n][i]})});const{correlation:u,variance:c}=(0,a.default)(s),l=n[0].length;if(n.length!==e.length)throw new Error(`shape mismatch (${n.length} vs ${e.length})`);return{dimension:r,observedProjection:(0,i.matPermutation)({outputSize:[r,l],colIndexes:n[0].map((t,r)=>r),rowIndexes:e,matrix:n}),covariance(t){const{variance:r}=t;if(!r)return s;if(r.length!==s.length)throw new Error("variance is difference size from baseCovariance");return(0,o.default)({correlation:u,variance:c.map((t,e)=>r[e]*t)})}}}},5800(t){"use strict";t.exports=function(t){return t instanceof this?new this(t.getReal(),-1*t.getImaginary()):this.NaN}},5909(t){"use strict";t.exports=function(t){if(!(t instanceof this))return this.NaN;var r=t.getReal(),e=t.getImaginary(),n=Math.exp(r);return new this(n*Math.cos(e),n*Math.sin(e))}},6018(t){"use strict";t.exports=function(t){return this.multiply(new this(0,.5),this.subtract(this.log(this.subtract(this.ONE,this.multiply(new this(0,1),t))),this.log(this.add(this.ONE,this.multiply(new this(0,1),t)))))}},6050(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2769),o=e(2579).INVALID_SQUARE_MATRIX;t.exports=function(){if(!this.isSquare())throw new Error(o);if(void 0!==this._det)return this._det;var t=this._matrix,r=t.length;if(0===r)return this._det=1,1;if(1===r)return this._det=t[0][0],this._det;if(2===r)return this._det=t[0][0]*t[1][1]-t[0][1]*t[1][0],this._det;if(3===r)return this._det=t[0][0]*t[1][1]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]-t[0][1]*t[1][0]*t[2][2]-t[0][0]*t[1][2]*t[2][1],this._det;for(var e=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.LU(this,!0),2),a=e[0],s=e[1]._matrix,u=0,c=0;c<r;c++)if(a[c]!==c)for(;a[c]!==c;){var l=a[c];a[c]=a[l],a[l]=l,u++}for(var f=1,h=0;h<r;h++)f*=s[h][h];return u%2==1?(this._det=-1*f,this._det):(this._det=f,f)}},6080(t,r,e){"use strict";var n=e(2579),i=n.INVALID_MATRIX,o=n.INVALID_SQUARE_MATRIX,a=n.SINGULAR_MATRIX,s=e(2769);t.exports=function(t){if(!(t instanceof this))throw new Error(i);if(!t.isSquare())throw new Error(o);var r=t.size()[0];if(0===r)return new s([]);for(var e=1/(2*Math.pow(10,t._digit)),n=this.identity(r)._matrix,u=this.clone(t)._matrix,c=function(t){for(var r=new Array(t),e=0;e<t;e++)r[e]=e;return r}(r),l=0;l<r;l++){for(var f=l,h=u[c[l]][l];Math.abs(h)<e&&f<r-1;)h=u[c[++f]][l];if(Math.abs(h)<e)throw new Error(a);if(l!==f){var d=c[l];c[l]=c[f],c[f]=d}for(var m=c[l],y=0;y<r;y++){var v=c[y];if(y===l){for(var p=0;p<r;p++)p===l&&(u[v][p]=1),p>l&&(u[v][p]/=h),n[v][p]/=h;h=1}if(y!==l&&Math.abs(u[v][l])>=e)for(var b=u[v][l]/h,g=0;g<r;g++)g===l&&(u[v][g]=0),g>l&&(u[v][g]-=b*u[m][g]),n[v][g]-=b*n[m][g]}}for(var w=0;w<r;w++)u[w]=n[c[w]];return new this(u)}},6195(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.shorttermConstantSpeed=r.constantSpeedDynamic=r.constantPositionWithNull=r.composition=r.constantAcceleration=r.constantSpeed=r.constantPosition=void 0;var i=e(9927);Object.defineProperty(r,"constantPosition",{enumerable:!0,get:function(){return n(i).default}});var o=e(4965);Object.defineProperty(r,"constantSpeed",{enumerable:!0,get:function(){return n(o).default}});var a=e(9720);Object.defineProperty(r,"constantAcceleration",{enumerable:!0,get:function(){return n(a).default}});var s=e(1573);Object.defineProperty(r,"composition",{enumerable:!0,get:function(){return n(s).default}});var u=e(1636);Object.defineProperty(r,"constantPositionWithNull",{enumerable:!0,get:function(){return n(u).default}});var c=e(8065);Object.defineProperty(r,"constantSpeedDynamic",{enumerable:!0,get:function(){return n(c).default}});var l=e(674);Object.defineProperty(r,"shorttermConstantSpeed",{enumerable:!0,get:function(){return n(l).default}})},6306(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return t.filter((r,e)=>t.indexOf(r)===e)}},6341(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673),i=e(4673);r.default=function(t){const{observation:r,dynamic:e}=t,{observedProjection:o,stateProjection:a}=r,s=r.dimension,u=e.dimension;if(o&&a)throw new TypeError("You cannot use both observedProjection and stateProjection");if(o){const t=(0,n.padWithZeroCols)(o,{columns:u});return{observation:{...r,stateProjection:t},dynamic:e}}if(s&&u&&!a){const t=(0,i.identity)(s);return{observation:{...r,stateProjection:(0,n.padWithZeroCols)(t,{columns:u})},dynamic:e}}return{observation:r,dynamic:e}}},6376(t){t.exports=function(t,r){if(t.length!==r.length)throw new Error("Lengths not maching");let e=0;for(const[n,i]of t.entries())e+=i*r[n];return e}},6405(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=e(1912),a=e(2769),s=e(2579).INVALID_SQUARE_MATRIX;function u(t,r){for(var e=t.length,i=1/(2*Math.pow(10,r)),o=new Array(e-1),a=0;a<e-1;a++){var s=t[a][a],u=t[a+1][a],c=Math.sqrt(Math.pow(s,2)+Math.pow(u,2));if(!(c<i)){var l=s/c,f=-1*u/c;o[a]=[f,l];for(var h=new Array(e-a),d=new Array(e-a),m=a;m<e;m++)h[m-a]=t[a][m],d[m-a]=t[a+1][m];for(var y=a;y<e;y++)t[a][y]=l*h[y-a]+-1*f*d[y-a],t[a+1][y]=a===y?0:f*h[y-a]+l*d[y-a]}}for(var v=0;v<e-1;v++)if(o[v]){for(var p=n(o[v],2),b=p[0],g=p[1],w=new Array(v+2),A=new Array(v+2),_=0;_<=v+1;_++)w[_]=t[_][v],A[_]=t[_][v+1];for(var I=0;I<=v+1;I++)t[I][v]=w[I]*g-A[I]*b,t[I][v+1]=w[I]*b+A[I]*g}}function c(t,r,e,n){var i,o,a,s,u=-1*(t+n),c=t*n-e*r,l=Math.pow(u,2)-4*c;return l>=0?(o=0,s=0,a=c/(i=u>=0?(-1*u-Math.sqrt(l))/2:(-1*u+Math.sqrt(l))/2)):(a=i=-u/2,s=-1*(o=Math.sqrt(-1*l)/2)),{metric:Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),eigen1:{re:i,im:o},eigen2:{re:a,im:s}}}t.exports=function(){if(!this.isSquare())throw new Error(s);if(void 0!==this._eigenvalues)return this._eigenvalues;var t=this.size()[0],r=[],e=this._digit,n=1/(2*Math.pow(10,e)),i=a.clone(this)._matrix,l=!0,f=!1;!function(t,r){for(var e=t.length,n=1/(2*Math.pow(10,r)),i=0;i<e-2;i++){for(var o=0,a=new Array(e-i-1),s=i+1;s<e;s++){var u=t[s][i];o+=Math.pow(u,2),a[s-i-1]=u}if(o=Math.sqrt(o),!(Math.abs(o)<n)){a[0]>=0?a[0]+=o:a[0]-=o;for(var c=0,l=0;l<a.length;l++)c+=Math.pow(a[l],2);c=Math.sqrt(c);for(var f=0;f<a.length;f++)a[f]/=c;for(var h=i;h<e;h++){for(var d=new Array(e-i-1),m=i+1;m<e;m++)d[m-i-1]=t[m][h];for(var y=0,v=0;v<d.length;v++)y+=d[v]*a[v];y*=2;for(var p=i+1;p<e;p++)t[p][h]=h===i&&p!==i+1?0:d[p-i-1]-y*a[p-i-1]}for(var b=0;b<e;b++){for(var g=new Array(e-i-1),w=i+1;w<e;w++)g[w-i-1]=t[b][w];for(var A=0,_=0;_<g.length;_++)A+=g[_]*a[_];A*=2;for(var I=i+1;I<e;I++)t[b][I]=g[I-i-1]-A*a[I-i-1]}}}}(i,e);for(var h=t-1;h>0;h--){var d=0,m=void 0;if(f)f=!1;else for(var y=i[t-1][t-1];;){m=l?Math.abs(i[h][h-1]):c(i[h-1][h-1],i[h-1][h],i[h][h-1],i[h][h]).metric;for(var v=0;v<t;v++)i[v][v]-=y;u(i,e);for(var p=0;p<t;p++)i[p][p]+=y;if(l&&m<Math.abs(i[h][h-1])&&d++,l&&Math.abs(i[h][h-1])<n){r[h]=new o(i[h][h]);break}var b=c(i[h-1][h-1],i[h-1][h],i[h][h-1],i[h][h]),g=b.metric,w=b.eigen1,A=b.eigen2;if(!l&&Math.abs(m-g)<n){l=!0,f=!0;var _=w.re,I=w.im,M=A.re,x=A.im;r[h]=new o(_,I),r[h-1]=new o(M,x);break}d>3&&(l=!1)}}return f||(r[0]=new o(i[0][0])),this._eigenvalues=r,r}},6420(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(3029)),a=n(e(8981)),s=n(e(341)),u=t=>t.map(t=>t.concat());r.default=function(t){const{sensorDimension:r=1,sensorCovariance:e=1,nSensors:n=1}=t,c=(0,o.default)(e,{dimension:r});if(s.default.isFunction(c))throw new TypeError("sensorCovarianceFormatted can not be a function here");(0,a.default)(c,[r,r],"observation.sensorCovariance");const l=(0,i.identity)(r);let f=[];const h=r*n,d=(0,i.identity)(h);for(let t=0;t<n;t++){f=f.concat(u(l));for(const[e,n]of c.entries())for(const[i,o]of n.entries())d[e+t*r][i+t*r]=o}return{...t,dimension:h,observedProjection:f,covariance:d}}},6578(t,r,e){const n=e(287);t.exports=function(...t){return n(t,t=>t.reduce((t,r)=>null===t||null===r?null:t+r,0))}},6622(t,r,e){const n=e(2678);t.exports=function(t,{columns:r}){if(r<t[0].length)throw new TypeError(`Output columns ${r} is greater than input columns ${t[0].length}`);return n({matrix:t,outputSize:[t.length,r],rowIndexes:new Array(t.length).fill(0).map((t,r)=>r),colIndexes:new Array(t[0].length).fill(0).map((t,r)=>r)})}},6647(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function t(r,e,n="checkShape"){if(r.length!==e[0])throw new Error(`[${n}] expected size (${e[0]}) and length (${r.length}) does not match`);if(e.length>1)return r.forEach(r=>t(r,e.slice(1),n))}},6666(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=e(2579),a=o.INVALID_MATRIX,s=o.NO_UNIQUE_SOLUTION,u=o.INVALID_SQUARE_MATRIX,c=o.SIZE_INCOMPATIBLE;t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))throw new Error(a);if(!t.isSquare())throw new Error(u);var e=n(t.size(),2),i=e[0],o=e[1],l=n(r.size(),2),f=l[0],h=l[1];if(o!==f||1!==h)throw new Error(c);for(var d=1/(2*Math.pow(10,t._digit)),m=n(this.LU(t,!0),2),y=m[0],v=m[1]._matrix,p=r._matrix,b=i-1;b>=0;b--)if(Math.abs(v[b][b])<d)throw new Error(s);for(var g=new Array(f),w=new Array(f),A=0;A<f;A++)g[A]=p[y[A]][0];for(var _=0;_<i;_++){for(var I=0,M=0;M<_;M++)I+=w[M]*v[_][M];w[_]=g[_]-I}for(var x=i-1;x>=0;x--){for(var E=0,S=x+1;S<i;S++)E+=v[x][S]*g[S];g[x]=(w[x]-E)/v[x][x]}for(var N=0;N<f;N++)w[N]=[g[N]];return new this(w)}},6688(t,r,e){const n=e(9164),i=e(2834),o=e(2097),a=e(1700),s=e(254);t.exports=function(t,r){if(void 0===t)return s(r);if(void 0===r)return s(t);const e=o(t,r),u=a(i(e),e);return Math.sqrt(n(u))}},6760(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(2058)),a=n(e(8981)),s=n(e(1601)),u=n(e(341));class c{mean;covariance;index;constructor(t){this.mean=t.mean,this.covariance=t.covariance,this.index=t.index||void 0}check(t){c.check(this,t)}static check(t,r={}){const{dimension:e,title:n,eigen:i}=r;if(!(t instanceof c))throw new TypeError("The argument is not a state \nTips: maybe you are using 2 different version of kalman-filter in your npm deps tree");const{mean:o,covariance:u}=t,l=o.length;if("number"==typeof e&&l!==e)throw new Error(`[${n}] State.mean ${o} with dimension ${l} does not match expected dimension (${e})`);(0,a.default)(o,[l,1],n?n+".mean":"mean"),(0,a.default)(u,[l,l],n?n+".covariance":"covariance"),(0,s.default)({covariance:u,eigen:i},n?n+".covariance":"covariance")}static matMul(t){const{state:r,matrix:e}=t,n=(0,i.matMul)((0,i.matMul)(e,r.covariance),(0,i.transpose)(e)),o=(0,i.matMul)(e,r.mean);return new c({mean:o,covariance:n,index:r.index})}subState(t){return new c({mean:t.map(t=>this.mean[t]),covariance:(0,i.subSquareMatrix)(this.covariance,t),index:this.index})}rawDetailedMahalanobis(t){const r=(0,i.subtract)(this.mean,t);this.check();const e=(0,i.invert)(this.covariance);if(null===e)throw this.check({eigen:!0}),new Error(`Cannot invert covariance ${JSON.stringify(this.covariance)}`);const n=(0,i.transpose)(r),o=(0,i.matMul)((0,i.matMul)(n,e),r),a=Math.sqrt(o[0][0]);if(Number.isNaN(a)){const o=(0,i.matMul)((0,i.matMul)(n,e),r);throw console.log({diff:r,covarianceInvert:e,this:this,point:t},o),new Error("mahalanobis is NaN")}return{diff:r,covarianceInvert:e,value:a}}detailedMahalanobis(t){const{kf:r,observation:e,obsIndexes:n}=t;if(e.length!==r.observation.dimension)throw new Error(`Mahalanobis observation ${e} (dimension: ${e.length}) does not match with kf observation dimension (${r.observation.dimension})`);let i=(0,o.default)({observation:e,dimension:e.length});u.default.assertIsArray2D(r.observation.stateProjection,"State.detailedMahalanobis");const a=r.getValue(r.observation.stateProjection,{});let s=c.matMul({state:this,matrix:a});return Array.isArray(n)&&(s=s.subState(n),i=n.map(t=>i[t])),s.rawDetailedMahalanobis(i)}mahalanobis(t){const r=this.detailedMahalanobis(t).value;if(Number.isNaN(r))throw new TypeError("mahalanobis is NaN");return r}obsBhattacharyya(t){const{kf:r,state:e,obsIndexes:n}=t;u.default.assertIsArray2D(r.observation.stateProjection,"State.obsBhattacharyya");const i=r.getValue(r.observation.stateProjection,{});let o=c.matMul({state:this,matrix:i}),a=c.matMul({state:e,matrix:i});return Array.isArray(n)&&(o=o.subState(n),a=a.subState(n)),o.bhattacharyya(a)}bhattacharyya(t){const{covariance:r,mean:e}=this,n=(0,i.elemWise)([r,t.covariance],([t,r])=>(t+r)/2);let o;try{o=(0,i.invert)(n)}catch(t){throw console.log("Cannot invert",n),t}const a=(0,i.subtract)(e,t.mean);return(0,i.matMul)((0,i.transpose)(a),(0,i.matMul)(o,a))[0][0]}}r.default=c},7163(t){"use strict";t.exports=function(t){return this.multiply(new this(0,-1),this.log(this.add(this.multiply(new this(0,1),t),this.pow(this.subtract(this.ONE,this.pow(t,2)),.5))))}},7212(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579).INVALID_MATRIX;t.exports=function(t){if(!(t instanceof this))throw new Error(i);for(var r=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.size(),2),e=r[0],o=r[1],a=Math.min(e,o),s=t._matrix,u=new Array(a),c=0;c<a;c++)u[c]=s[c][c];return u}},7289(t){"use strict";t.exports=function(t,r){return void 0===r?this.generate(t,t,function(){return 0}):this.generate(t,r,function(){return 0})}},7570(t){"use strict";function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._digit;if(void 0!==this._isUpperTriangular)return this._isUpperTriangular;var e=1/(2*Math.pow(10,t)),n=this._matrix,i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.size(),2),o=i[0],a=i[1];if(0===o)return this._isUpperTriangular=!0,!0;for(var s=0;s<o;s++)for(var u=0;u<a;u++)if(!(s<=u)&&Math.abs(n[s][u])>=e)return this._isUpperTriangular=!1,!1;return this._isUpperTriangular=!0,!0}},7748(t){"use strict";function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._digit;if(void 0!==this._isDiagonal)return this._isDiagonal;var e=1/(2*Math.pow(10,t)),n=this._matrix,i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.size(),2),o=i[0],a=i[1];if(0===o)return this._isDiagonal=!0,!0;for(var s=0;s<o;s++)for(var u=0;u<a;u++)if(s!==u&&Math.abs(n[s][u])>=e)return this.isDiagonal=!1,!1;return this._isDiagonal=!0,!0}},7759(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579),o=i.INVALID_ROW_COL,a=i.OVERFLOW_ROW,s=i.INVALID_MATRIX;t.exports=function(t,r){if(!(t instanceof this))throw new Error(s);if(!Number.isInteger(r)||r<0)throw new Error(o);var e,i,u=(e=t.size(),i=2,function(t){if(Array.isArray(t))return t}(e)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(e,i)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1];if(r>=c)throw new Error(a);var f=t._matrix;return this.generate(1,l,function(t,e){return f[r][e]})}},7840(t){"use strict";t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))return this.NaN;var e=t.re,n=t.im,i=r.re,o=r.im;return new this(e*i-n*o,e*o+n*i)}},7852(t){"use strict";t.exports=function(){var t=this.re,r=this.im;return Number.isNaN(t)||Number.isNaN(r)?"NaN":0===t&&0===r?"0":0===t?1===r?"i":-1===r?"-i":"".concat(r,"i"):0===r?"".concat(t):r>0?1===r?"".concat(t," + i"):"".concat(t," + ").concat(r,"i"):-1===r?"".concat(t," - i"):"".concat(t," - ").concat(Math.abs(r),"i")}},7940(t){"use strict";t.exports=function(t){if(!(t instanceof this))return this.NaN;var r=t.getReal(),e=t.getImaginary();return new this(Math.sin(r)*Math.cosh(e),Math.cos(r)*Math.sinh(e))}},8065(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673);r.default=function(t,r){const{staticCovariance:e,avSpeed:i,center:o}=t,a=r.observedProjection[0].length,s=2*a;if(void 0===o)throw new TypeError("Center must be defined");if(o.length!==a)throw new TypeError(`Center size should be ${a}`);if(i.length!==a)throw new TypeError(`avSpeed size should be ${a}`);const u=(0,n.diag)(o.map(t=>t*t/3).concat(i.map(t=>t*t/3)));return{init:{mean:o.map(t=>[t]).concat(o.map(()=>[0])),covariance:u,index:-1},dimension:s,transition:t=>{const{getTime:r,index:e,previousCorrected:i}=t,s=r(e)-r(i.index);if("number"!=typeof s||Number.isNaN(s))throw new TypeError(`dT (${s}) should be a number`);const u=(0,n.diag)(o.map(()=>1).concat(o.map(()=>1)));for(let t=0;t<a;t++)u[t][a+t]=s;if(Number.isNaN(u[0][2]))throw new TypeError("nan mat");return u},covariance:t=>{const{index:r,previousCorrected:i,getTime:o}=t,a=o(r)-o(i.index);if("number"!=typeof a)throw new TypeError(`dT (${a}) should be a number`);const s=Math.sqrt(a);if(Number.isNaN(s))throw console.log({lastPreviousIndex:i.index,index:r}),console.log(a,i.index,r,o(r),o(i.index)),new Error("Sqrt(dT) is NaN");return(0,n.diag)(e.map(t=>t*s))}}}},8125(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2769),o=e(2579).INVALID_P_NORM;t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.size(),2),e=r[0],a=r[1];if(1!==t&&2!==t&&t!==1/0&&"F"!==t)throw new Error(o);var s=this._matrix,u=0;if(1===t){for(var c=0;c<a;c++){for(var l=0,f=0;f<e;f++)l+=Math.abs(s[f][c]);l>u&&(u=l)}return u}if(2===t){for(var h=i.transpose(this),d=i.multiply(h,this).eigenvalues(),m=0;m<d.length;m++){var y=d[m].getModulus();y>u&&(u=y)}return Math.sqrt(u)}if(t===1/0){for(var v=0;v<e;v++){for(var p=0,b=0;b<a;b++)p+=Math.abs(s[v][b]);p>u&&(u=p)}return u}for(var g=0;g<e;g++)for(var w=0;w<a;w++)u+=Math.pow(s[g][w],2);return Math.sqrt(u)}},8239(t){"use strict";t.exports=function(t){if(!(t instanceof this))return!1;var r=t.getReal(),e=t.getImaginary();return!(!Number.isNaN(r)&&!Number.isNaN(e))}},8279(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579).INVALID_MATRIX;t.exports=function(t){if(!(t instanceof this))throw new Error(i);var r,e,o=(r=t.size(),e=2,function(t){if(Array.isArray(t))return t}(r)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(r,e)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],u=t._matrix;return this.generate(s,a,function(t,r){return u[r][t]})}},8339(t,r,e){"use strict";function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,r)||function(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var o=e(2579),a=o.INVALID_MATRIX,s=o.SIZE_INCOMPATIBLE;t.exports=function(t,r){if(!(t instanceof this&&r instanceof this))throw new Error(a);var e=n(t.size(),2),i=e[0],o=e[1],u=n(r.size(),2),c=u[0],l=u[1];if(i!==c||o!==l)throw new Error(s);var f=t._matrix,h=r._matrix;return this.generate(i,o,function(t,r){return f[t][r]+h[t][r]})}},8457(t){"use strict";t.exports=function(t){return this.divide(this.ONE,this.sin(t))}},8578(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=e(4673),o=n(e(3029)),a=n(e(341));r.default=function(t){const{observation:r,dynamic:e}=t;if(!e.init){const t=1e6,n=e.dimension,o=new Array(n).fill(0),a=new Array(n).fill(t);return{observation:r,dynamic:{...e,init:{mean:o.map(t=>[t]),covariance:(0,i.diag)(a),index:-1}}}}if(e.init&&!e.init.mean)throw new Error("dynamic.init should have a mean key");const n=(0,o.default)(e.init.covariance,{dimension:e.dimension});if(a.default.isFunction(n))throw new TypeError("covariance can not be a function");return e.init={...e.init,covariance:n},{observation:r,dynamic:e}}},8739(t){t.exports=function(t){let r=0;for(const e of t)r+=e*e;return Math.sqrt(r)}},8837(t){"use strict";t.exports=function(){return Math.sqrt(Math.pow(this.re,2)+Math.pow(this.im,2))}},8856(t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._digit;if(void 0!==this._isSymmetric)return this._isSymmetric;if(!this.isSquare())return!1;for(var r=this._matrix,e=1/(2*Math.pow(10,t)),n=r.length,i=0;i<n;i++)for(var o=0;o<=i;o++)if(Math.abs(r[i][o]-r[o][i])>=e)return this._isSymmetric=!1,!1;return this._isSymmetric=!0,!0}},8892(t){t.exports=function(t){let r=0;for(const e of t)r+=e;return r}},8940(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673),i=e(929);r.default=function(t){const{dimension:r,observedProjection:e,covariance:o}=(0,i.buildObservation)({...t,name:"sensor"});return{dimension:r,observedProjection:e,covariance(t){const e=(0,n.identity)(r),{variance:i}=t;return i.forEach((t,r)=>{e[r][r]=t*o[r][r]}),e}}}},8981(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(e(6647));r.default=function(t,r,e="checkMatrix"){if(!Array.isArray(t))throw new TypeError(`[${e}] should be a 2-level array matrix and is ${t}`);for(const r of t)if(!Array.isArray(r))throw new TypeError(`[${e}] 1-level array should be a matrix ${JSON.stringify(t)}`);if(t.reduce((t,r)=>t.concat(r)).some(t=>Number.isNaN(t)))throw new Error(`[${e}] Matrix should not have a NaN\nIn : \n`+t.join("\n"));r&&(0,i.default)(t,r,e)}},8987(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579).INVALID_MATRIX;t.exports=function(t,r){if(!(t instanceof this))throw new Error(i);var e,o,a=(e=t.size(),o=2,function(t){if(Array.isArray(t))return t}(e)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(e,o)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],u=a[1],c=t._matrix;return this.generate(s,u,function(t,e){return r(c[t][e])})}},9042(t,r,e){"use strict";function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i=e(2579).INVALID_MATRIX;t.exports=function(t){if(!(t instanceof this))throw new Error(i);var r,e,o=(r=t.size(),e=2,function(t){if(Array.isArray(t))return t}(r)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(r,e)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],u=t._matrix;return this.generate(a,s,function(t,r){return u[t][r]})}},9065(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){const{observation:r,dynamic:e}=t,n=e.dimension,i=r.dimension;if(!n||!i)throw new TypeError("Dimension is not set");return{observation:r,dynamic:e}}},9164(t){t.exports=function(t){let r=0;for(const[e,n]of t.entries())r+=n[e];return r}},9180(t){"use strict";t.exports=function(){if(void 0!==this._isSquare)return this._isSquare;var t=this._matrix;return 0===t.length?(this._isSquare=!0,!0):(this._isSquare=t.length===t[0].length,this._isSquare)}},9233(t){"use strict";t.exports=function(t,r){return t instanceof this&&r instanceof this?new this(t.re+r.re,t.im+r.im):this.NaN}},9297(t){"use strict";t.exports=function(){var t=this.re,r=this.im,e=1/(2*Math.pow(10,15));if(!(Math.abs(t)<e&&Math.abs(r)<e))return 0===t?r>0?.5*Math.PI:1.5*Math.PI:0===r?t>0?0:Math.PI:t>0&&r>0?Math.atan(r/t):t<0&&r>0?Math.PI-Math.atan(r/(-1*t)):t<0&&r<0?Math.PI+Math.atan(-1*r/(-1*t)):2*Math.PI-Math.atan(-1*r/t)}},9312(t){"use strict";t.exports=function(t){if(!(t instanceof this))return this.NaN;var r=t.getModulus(),e=t.getArgument();return r<this.EPSILON||void 0===e?this.NaN:new this(Math.log(r),e)}},9364(t){"use strict";t.exports=function(t){return this.acos(this.inverse(t))}},9461(t){"use strict";t.exports=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.generate(t,r,function(){return Number.parseFloat((Math.random()*(n-e)+e).toFixed(i))})}},9505(t){"use strict";t.exports=function(t){return this.divide(this.sin(t),this.cos(t))}},9573(t){"use strict";function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t.exports=function(){for(var t=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.size(),2),e=t[0],n=t[1],i=new Array(e*n),o=0;o<e;o++)for(var a=0;a<n;a++)i[o*n+a]=this._matrix[o][a];return i}},9583(t,r,e){"use strict";var n=e(2579).INVALID_ROW_COL;t.exports=function(t,r){if(!Number.isInteger(t)||t<0||!Number.isInteger(r)||r<0)throw new Error(n);if(0===t||0===r)return[];for(var e=new Array(t),i=0;i<t;i++)e[i]=new Array(r);return e}},9587(t){"use strict";function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._digit;if(void 0!==this._isLowerTriangular)return this._isLowerTriangular;var e=1/(2*Math.pow(10,t)),n=this._matrix,i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.size(),2),o=i[0],a=i[1];if(0===o)return this._isLowerTriangular=!0,!0;for(var s=0;s<o;s++)for(var u=s+1;u<a;u++)if(Math.abs(n[s][u])>=e)return this._isLowerTriangular=!1,!1;return this._isLowerTriangular=!0,!0}},9720(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673);r.default=function(t,r){const e=t.timeStep||1,{observedProjection:i}=r,{stateProjection:o}=r,a=r.dimension;let s;if(o&&Number.isInteger(o[0].length/3))s=r.stateProjection[0].length;else if(i)s=3*i[0].length;else{if(!a)throw new Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");s=3*a}const u=s/3,c=(0,n.identity)(s);for(let t=0;t<u;t++)c[t][t+u]=e,c[t][t+2*u]=.5*e**2,c[t+u][t+2*u]=e;const l=new Array(u).fill(1).concat(new Array(u).fill(e*e)).concat(new Array(u).fill(e**4)),f=t.covariance||l;return{...t,dimension:s,transition:c,covariance:f}}},9726(t){"use strict";t.exports=function(t){return this.asin(this.inverse(t))}},9780(t){"use strict";t.exports=function(t,r){return t instanceof this&&r instanceof this?new this(t.re-r.re,t.im-r.im):this.NaN}},9801(t,r,e){t.exports={add:e(6578),cosSimilarity:e(188),euclideanDist:e(374),diag:e(3614),diagBlock:e(4594),dotProduct:e(6376),elemWise:e(287),frobenius:e(6688),identity:e(471),invert:e(3621),mapMatrix:e(4825),matMul:e(1700),matPermutation:e(2678),padWithZeroCols:e(6622),subtract:e(2097),subSquareMatrix:e(4165),sum:e(254),trace:e(9164),transpose:e(2834),zeros:e(1394),norm:e(8739),sumVector:e(8892)}},9927(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e(4673);r.default=function(t,r){let{dimension:e}=t;const i=r.dimension,{observedProjection:o}=r,{stateProjection:a}=r;let{covariance:s}=t;t.dimension||(i?e=i:o?e=o[0].length:a&&(e=a[0].length));const u=(0,n.identity)(e);return s||=(0,n.identity)(e),{...t,dimension:e,transition:u,covariance:s}}}},r={},e=function e(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};return t[n].call(o.exports,o,o.exports,e),o.exports}(73);kalmanFilter=e})();