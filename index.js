var lZ=Object.create;var{getPrototypeOf:mZ,defineProperty:f0,getOwnPropertyNames:sZ}=Object;var tZ=Object.prototype.hasOwnProperty;var g=(J,Y,K)=>{K=J!=null?lZ(mZ(J)):{};let Z=Y||!J||!J.__esModule?f0(K,"default",{value:J,enumerable:!0}):K;for(let G of sZ(J))if(!tZ.call(Z,G))f0(Z,G,{get:()=>J[G],enumerable:!0});return Z};var $=(J,Y)=>()=>(Y||J((Y={exports:{}}).exports,Y),Y.exports);var R1=(J,Y)=>{for(var K in Y)f0(J,K,{get:Y[K],enumerable:!0,configurable:!0,set:(Z)=>Y[K]=()=>Z})};var U0=$((TF,f1)=>{f1.exports=function(Y,K){return Y[0].map((Z,G)=>{return Z.map((F,Q)=>{let W=Y.map((X)=>X[G][Q]);return K(W,G,Q)})})}});var T1=$((LF,I1)=>{var nZ=U0();I1.exports=function(...Y){return nZ(Y,(K)=>{return K.reduce((Z,G)=>{if(Z===null||G===null)return null;return Z+G},0)})}});var L0=$((wF,L1)=>{L1.exports=function(Y,K){if(Y.length!==K.length)throw Error("Lengths not maching");let Z=0;for(let[G,F]of Y.entries())Z+=F*K[G];return Z}});var w0=$((CF,w1)=>{w1.exports=function(Y){let K=0;for(let Z of Y)K+=Z*Z;return Math.sqrt(K)}});var h1=$((MF,M1)=>{var oZ=L0(),C1=w0();M1.exports=function(Y,K){if(Y.length!==K.length)throw Error("The lengths of the vectors do not match");let Z=C1(Y)*C1(K);if(Z===0)return 0;return oZ(Y,K)/Z}});var A1=$((hF,g1)=>{g1.exports=function(Y,K){if(Y.length!==K.length)throw Error("Invalid array lengths");if(!Array.isArray(Y))throw console.log({array1:Y}),Error("Invalid array");let Z=Y.map((G,F)=>G-K[F]).map((G)=>G*G);return Math.sqrt(Z.reduce((G,F)=>G+F))}});var C0=$((gF,v1)=>{v1.exports=function(Y,K){return Array(Y).fill(1).map(()=>Array(K).fill(0))}});var j1=$((AF,y1)=>{var aZ=C0();y1.exports=function(Y){let K=aZ(Y.length,Y.length);for(let[Z,G]of Y.entries())K[Z][Z]=G;return K}});var M0=$((vF,b1)=>{b1.exports=function(Y){let K=[];for(let Z=0;Z<Y;Z++){let G=[];for(let F=0;F<Y;F++)if(Z===F)G.push(1);else G.push(0);K.push(G)}return K}});var p1=$((yF,x1)=>{var eZ=M0();x1.exports=function({blocks:Y,order:K=null}){let Z=Y.map((Q)=>Q.length).reduce((Q,W)=>Q+W,0),G=eZ(Z),F=0;for(let Q of Y){for(let[W]of Q.entries())for(let[X]of Q.entries())G[W+F][X+F]=Q[W][X];F+=Q.length}if(K)return K.map((Q)=>K.map((W)=>G[Q][W]));return G}});var h0=$((jF,d1)=>{d1.exports=function(Y){let K=0;for(let[Z,G]of Y.entries())K+=G[Z];return K}});var g0=$((bF,u1)=>{u1.exports=function(Y){return Y[0].map((K,Z)=>Y.map((G)=>G[Z]))}});var A0=$((xF,c1)=>{var iZ=U0();c1.exports=function(...Y){return iZ(Y,([K,Z])=>K-Z)}});var v0=$((pF,_1)=>{_1.exports=function(Y,K){let Z=[];for(let G=0;G<Y.length;G++){Z[G]=[];for(let F=0;F<K[0].length;F++){let Q=0,W=!1;for(let X=0;X<Y[0].length;X++){if(Y[G][X]===null&&K[X][F]!==0||K[X][F]===null&&Y[G][X]!==0){W=!0;break}Q+=Y[G][X]*K[X][F]}Z[G][F]=W?null:Q}}return Z}});var y0=$((dF,l1)=>{l1.exports=function(Y){let K=0;for(let Z of Y)K+=Z;return K}});var j0=$((uF,m1)=>{var rZ=y0();m1.exports=function(Y){let K=0;for(let Z of Y)K+=rZ(Z);return K}});var n1=$((cF,t1)=>{var J7=h0(),Y7=g0(),K7=A0(),Z7=v0(),s1=j0();t1.exports=function(Y,K){if(Y===void 0)return s1(K);if(K===void 0)return s1(Y);let Z=K7(Y,K),G=Z7(Y7(Z),Z);return Math.sqrt(J7(G))}});var a1=$((_F,o1)=>{var x={};x.Matrix=function(){};x.Matrix.create=function(J){var Y=new x.Matrix;return Y.setElements(J)};x.Matrix.I=function(J){var Y=[],K=J,Z;while(K--){Z=J,Y[K]=[];while(Z--)Y[K][Z]=K===Z?1:0}return x.Matrix.create(Y)};x.Matrix.prototype={dup:function(){return x.Matrix.create(this.elements)},isSquare:function(){var J=this.elements.length===0?0:this.elements[0].length;return this.elements.length===J},toRightTriangular:function(){if(this.elements.length===0)return x.Matrix.create([]);var J=this.dup(),Y,K=this.elements.length,Z,G,F=this.elements[0].length,Q;for(Z=0;Z<K;Z++){if(J.elements[Z][Z]===0){for(G=Z+1;G<K;G++)if(J.elements[G][Z]!==0){Y=[];for(Q=0;Q<F;Q++)Y.push(J.elements[Z][Q]+J.elements[G][Q]);J.elements[Z]=Y;break}}if(J.elements[Z][Z]!==0)for(G=Z+1;G<K;G++){var W=J.elements[G][Z]/J.elements[Z][Z];Y=[];for(Q=0;Q<F;Q++)Y.push(Q<=Z?0:J.elements[G][Q]-J.elements[Z][Q]*W);J.elements[G]=Y}}return J},determinant:function(){if(this.elements.length===0)return 1;if(!this.isSquare())return null;var J=this.toRightTriangular(),Y=J.elements[0][0],K=J.elements.length;for(var Z=1;Z<K;Z++)Y=Y*J.elements[Z][Z];return Y},isSingular:function(){return this.isSquare()&&this.determinant()===0},augment:function(J){if(this.elements.length===0)return this.dup();var Y=J.elements||J;if(typeof Y[0][0]>"u")Y=x.Matrix.create(Y).elements;var K=this.dup(),Z=K.elements[0].length,G=K.elements.length,F=Y[0].length,Q;if(G!==Y.length)return null;while(G--){Q=F;while(Q--)K.elements[G][Z+Q]=Y[G][Q]}return K},inverse:function(){if(this.elements.length===0)return null;if(!this.isSquare()||this.isSingular())return null;var J=this.elements.length,Y=J,K,Z=this.augment(x.Matrix.I(J)).toRightTriangular(),G=Z.elements[0].length,F,Q,W,X=[],V;while(Y--){Q=[],X[Y]=[],W=Z.elements[Y][Y];for(F=0;F<G;F++)if(V=Z.elements[Y][F]/W,Q.push(V),F>=J)X[Y].push(V);Z.elements[Y]=Q,K=Y;while(K--){Q=[];for(F=0;F<G;F++)Q.push(Z.elements[K][F]-Z.elements[Y][F]*Z.elements[K][Y]);Z.elements[K]=Q}}return x.Matrix.create(X)},setElements:function(J){var Y,K,Z=J.elements||J;if(Z[0]&&typeof Z[0][0]<"u"){Y=Z.length,this.elements=[];while(Y--){K=Z[Y].length,this.elements[Y]=[];while(K--)this.elements[Y][K]=Z[Y][K]}return this}var G=Z.length;this.elements=[];for(Y=0;Y<G;Y++)this.elements.push([Z[Y]]);return this}};o1.exports=function(J){let Y=x.Matrix.create(J).inverse();if(Y!==null)return Y.elements;else return null}});var i1=$((lF,e1)=>{var G7=a1();e1.exports=function(Y){return G7(Y)}});var JJ=$((mF,r1)=>{r1.exports=function(Y,K){return Y.map((Z,G)=>Z.map((F,Q)=>K(F,G,Q)))}});var b0=$((sF,YJ)=>{YJ.exports=function({matrix:Y,outputSize:K,rowIndexes:Z,colIndexes:G}){let[F,Q]=K;if(!Array.isArray(Z))throw TypeError(`Invalid rowIndexes ${Z}`);if(!Array.isArray(G))throw TypeError(`Invalid colIndexes ${G}`);return Array(F).fill(0).map((W,X)=>Array(Q).fill(0).map((V,H)=>{if(G.includes(H)&&Z.includes(X))return Y[Z.indexOf(X)][G.indexOf(H)];return 0}))}});var ZJ=$((tF,KJ)=>{var F7=b0();KJ.exports=function(J,{columns:Y}){if(Y<J[0].length)throw TypeError(`Output columns ${Y} is greater than input columns ${J[0].length}`);return F7({matrix:J,outputSize:[J.length,Y],rowIndexes:Array(J.length).fill(0).map((K,Z)=>Z),colIndexes:Array(J[0].length).fill(0).map((K,Z)=>Z)})}});var FJ=$((nF,GJ)=>{GJ.exports=function(Y,K){return K.map((Z)=>K.map((G)=>Y[Z][G]))}});var A=$((oF,QJ)=>{QJ.exports={add:T1(),cosSimilarity:h1(),euclideanDist:A1(),diag:j1(),diagBlock:p1(),dotProduct:L0(),elemWise:U0(),frobenius:n1(),identity:M0(),invert:i1(),mapMatrix:JJ(),matMul:v0(),matPermutation:b0(),padWithZeroCols:ZJ(),subtract:A0(),subSquareMatrix:FJ(),sum:j0(),trace:h0(),transpose:g0(),zeros:C0(),norm:w0(),sumVector:y0()}});var o0=$((IQ,qJ)=>{qJ.exports=function(Y){return Number.isFinite(Y)}});var UJ=$((TQ,HJ)=>{var V7=o0();HJ.exports=function(Y){if(!Array.isArray(Y))return!1;var K=Y.length;if(K===0)return!0;var Z=Y[0];if(!Array.isArray(Z))return!1;var G=Z.length;if(G===0)return!1;for(var F=0;F<K;F++){var Q=Y[F];if(!Array.isArray(Q)||Q.length!==G)return!1;for(var W=0;W<G;W++)if(!V7(Q[W]))return!1}return!0}});var I=$((LQ,$J)=>{$J.exports={INVALID_ARRAY:"Invalid argument: Received a non-array argument",INVALID_MATRIX:"Invalid argument: Received an invalid matrix",INVALID_SQUARE_MATRIX:"Invalid argument: Received a non-square matrix",INVALID_UPPER_TRIANGULAR_MATRIX:"Invalid argument: Received a non upper-triangular matrix",INVALID_LOWER_TRIANGULAR_MATRIX:"Invalid argument: Received a non lower-triangular matrix",INVALID_EXPONENT:"Invalid argument: Expected a non-negative integer exponent",INVALID_ROW_COL:"Invalid argument: Expected non-negative integer row and column",INVALID_ROW:"Invalid argument: Expected non-negative integer row",INVALID_COLUMN:"Invalid argument: Expected non-negative integer column",INVALID_ROWS_EXPRESSION:"Invalid argument: Received invalid rows expression",INVALID_COLUMNS_EXPRESSION:"Invalid argument: Received invalid columns expression",INVALID_P_NORM:"Invalid argument: Received invalid p-norm",OVERFLOW_INDEX:"Invalid argument: Matrix index overflow",OVERFLOW_COLUMN:"Invalid argument: Column index overflow",OVERFLOW_ROW:"Invalid argument: Row index overflow",NO_UNIQUE_SOLUTION:"Arithmetic Exception: The system has no unique solution",SIZE_INCOMPATIBLE:"Invalid argument: Matrix size-incompatible",SINGULAR_MATRIX:"Arithmetic Exception: The matrix is not invertible",EXPECTED_STRING_NUMBER_AT_POS_1_2:"Invalid argument: Expected a string or a number at arguments[1] and arguments[2]",EXPECTED_ARRAY_OF_NUMBERS_OR_MATRICES:"Invalid argument: Expected either an array of numbers or an array of square matrices"}});var OJ=$((wQ,EJ)=>{function q7(J,Y){return B7(J)||$7(J,Y)||U7(J,Y)||H7()}function H7(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U7(J,Y){if(!J)return;if(typeof J==="string")return BJ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return BJ(J,Y)}function BJ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function $7(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function B7(J){if(Array.isArray(J))return J}function E7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isDiagonal!==void 0)return this._isDiagonal;var Y=1/(Math.pow(10,J)*2),K=this._matrix,Z=this.size(),G=q7(Z,2),F=G[0],Q=G[1];if(F===0)return this._isDiagonal=!0,!0;for(var W=0;W<F;W++)for(var X=0;X<Q;X++)if(W!==X&&Math.abs(K[W][X])>=Y)return this.isDiagonal=!1,!1;return this._isDiagonal=!0,!0}EJ.exports=E7});var PJ=$((CQ,NJ)=>{function O7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isSkewSymmetric!==void 0)return this._isSkewSymmetric;if(!this.isSquare())return this._isSkewSymmetric=!1,!1;var Y=this._matrix,K=1/(Math.pow(10,J)*2),Z=Y.length;if(Z===0)return this._isSkewSymmetric=!0,!0;for(var G=0;G<Z;G++)for(var F=0;F<G;F++)if(Math.abs(Y[G][F]+Y[F][G])>=K)return this._isSkewSymmetric=!1,!1;return this._isSkewSymmetric=!0,!0}NJ.exports=O7});var RJ=$((MQ,DJ)=>{function N7(){if(this._isSquare!==void 0)return this._isSquare;var J=this._matrix;if(J.length===0)return this._isSquare=!0,!0;return this._isSquare=J.length===J[0].length,this._isSquare}DJ.exports=N7});var SJ=$((hQ,zJ)=>{function P7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isSymmetric!==void 0)return this._isSymmetric;if(!this.isSquare())return!1;var Y=this._matrix,K=1/(Math.pow(10,J)*2),Z=Y.length;for(var G=0;G<Z;G++)for(var F=0;F<=G;F++)if(Math.abs(Y[G][F]-Y[F][G])>=K)return this._isSymmetric=!1,!1;return this._isSymmetric=!0,!0}zJ.exports=P7});var IJ=$((gQ,fJ)=>{function D7(J,Y){return k7(J)||S7(J,Y)||z7(J,Y)||R7()}function R7(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z7(J,Y){if(!J)return;if(typeof J==="string")return kJ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return kJ(J,Y)}function kJ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function S7(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function k7(J){if(Array.isArray(J))return J}function f7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isLowerTriangular!==void 0)return this._isLowerTriangular;var Y=1/(Math.pow(10,J)*2),K=this._matrix,Z=this.size(),G=D7(Z,2),F=G[0],Q=G[1];if(F===0)return this._isLowerTriangular=!0,!0;for(var W=0;W<F;W++)for(var X=W+1;X<Q;X++)if(Math.abs(K[W][X])>=Y)return this._isLowerTriangular=!1,!1;return this._isLowerTriangular=!0,!0}fJ.exports=f7});var wJ=$((AQ,LJ)=>{function I7(J,Y){return C7(J)||w7(J,Y)||L7(J,Y)||T7()}function T7(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L7(J,Y){if(!J)return;if(typeof J==="string")return TJ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return TJ(J,Y)}function TJ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function w7(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function C7(J){if(Array.isArray(J))return J}function M7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isUpperTriangular!==void 0)return this._isUpperTriangular;var Y=1/(Math.pow(10,J)*2),K=this._matrix,Z=this.size(),G=I7(Z,2),F=G[0],Q=G[1];if(F===0)return this._isUpperTriangular=!0,!0;for(var W=0;W<F;W++)for(var X=0;X<Q;X++){if(W<=X)continue;if(Math.abs(K[W][X])>=Y)return this._isUpperTriangular=!1,!1}return this._isUpperTriangular=!0,!0}LJ.exports=M7});var MJ=$((vQ,CJ)=>{function h7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._digit;if(this._isOrthogonal!==void 0)return this._isOrthogonal;if(!this.isSquare())return this._isOrthogonal=!1,!1;var Y=this._matrix,K=1/(Math.pow(10,J)*2),Z=Y.length;for(var G=0;G<Z;G++)for(var F=G;F<Z;F++){var Q=0;for(var W=0;W<Z;W++)Q+=Y[G][W]*Y[F][W];if(G===F&&Math.abs(Q-1)>=K)return this._isOrthogonal=!1,!1;if(G!==F&&Math.abs(Q)>=K)return this._isOrthogonal=!1,!1}return this._isOrthogonal=!0,!0}CJ.exports=h7});var gJ=$((yQ,hJ)=>{var g7=c(),a0=I(),A7=a0.INVALID_P_NORM,v7=a0.SINGULAR_MATRIX,y7=a0.INVALID_SQUARE_MATRIX;function j7(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;if(J!==1&&J!==2&&J!==1/0&&J!=="F")throw Error(A7);if(!this.isSquare())throw Error(y7);try{var Y=g7.inverse(this);return Y.norm(J)*this.norm(J)}catch(K){if(K.message===v7)return 1/0;throw K}}hJ.exports=j7});var yJ=$((jQ,vJ)=>{function b7(J,Y){return u7(J)||d7(J,Y)||p7(J,Y)||x7()}function x7(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p7(J,Y){if(!J)return;if(typeof J==="string")return AJ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return AJ(J,Y)}function AJ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function d7(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function u7(J){if(Array.isArray(J))return J}var c7=c(),_7=I(),l7=_7.INVALID_SQUARE_MATRIX;function m7(){if(!this.isSquare())throw Error(l7);if(this._det!==void 0)return this._det;var J=this._matrix,Y=J.length;if(Y===0)return this._det=1,1;if(Y===1)return this._det=J[0][0],this._det;if(Y===2)return this._det=J[0][0]*J[1][1]-J[0][1]*J[1][0],this._det;if(Y===3)return this._det=J[0][0]*J[1][1]*J[2][2]+J[0][1]*J[1][2]*J[2][0]+J[0][2]*J[1][0]*J[2][1]-J[0][2]*J[1][1]*J[2][0]-J[0][1]*J[1][0]*J[2][2]-J[0][0]*J[1][2]*J[2][1],this._det;var K=c7.LU(this,!0),Z=b7(K,2),G=Z[0],F=Z[1],Q=F._matrix,W=0;for(var X=0;X<Y;X++){if(G[X]===X)continue;while(G[X]!==X){var V=G[X];G[X]=G[V],G[V]=V,W++}}var H=1;for(var q=0;q<Y;q++)H*=Q[q][q];if(W%2===1)return this._det=H*-1,this._det;return this._det=H,H}vJ.exports=m7});var bJ=$((bQ,jJ)=>{function s7(){return this.re}jJ.exports=s7});var pJ=$((xQ,xJ)=>{function t7(){return this.im}xJ.exports=t7});var uJ=$((pQ,dJ)=>{function n7(){return Math.sqrt(Math.pow(this.re,2)+Math.pow(this.im,2))}dJ.exports=n7});var _J=$((dQ,cJ)=>{function o7(){var J=this.re,Y=this.im,K=1/(Math.pow(10,15)*2);if(Math.abs(J)<K&&Math.abs(Y)<K)return;if(J===0){if(Y>0)return Math.PI*0.5;return Math.PI*1.5}if(Y===0){if(J>0)return 0;return Math.PI}if(J>0&&Y>0)return Math.atan(Y/J);if(J<0&&Y>0)return Math.PI-Math.atan(Y/(J*-1));if(J<0&&Y<0)return Math.PI+Math.atan(Y*-1/(J*-1));return Math.PI*2-Math.atan(Y*-1/J)}cJ.exports=o7});var mJ=$((uQ,lJ)=>{function a7(){var J=this.re,Y=this.im;if(Number.isNaN(J)||Number.isNaN(Y))return"NaN";if(J===0&&Y===0)return"0";if(J===0){if(Y===1)return"i";if(Y===-1)return"-i";return"".concat(Y,"i")}if(Y===0)return"".concat(J);if(Y>0){if(Y===1)return"".concat(J," + i");return"".concat(J," + ").concat(Y,"i")}if(Y===-1)return"".concat(J," - i");return"".concat(J," - ").concat(Math.abs(Y),"i")}lJ.exports=a7});var tJ=$((cQ,sJ)=>{function e7(J){if(!(J instanceof this))return!1;var Y=J.getReal(),K=J.getImaginary();if(Number.isNaN(Y)||Number.isNaN(K))return!0;return!1}sJ.exports=e7});var oJ=$((_Q,nJ)=>{function i7(J,Y){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:15;if(!(J instanceof this)||!(Y instanceof this))return!1;if(!Number.isInteger(K)||K<0)throw Error("Invalid argument: Expected a non-negative integer digit");var Z=1/(Math.pow(10,K)*2),G=J.getReal(),F=J.getImaginary(),Q=Y.getReal(),W=Y.getImaginary();if(Number.isNaN(G)&&Number.isNaN(F)&&Number.isNaN(Q)&&Number.isNaN(W))return!0;return Math.abs(G-Q)<Z&&Math.abs(F-W)<Z}nJ.exports=i7});var eJ=$((lQ,aJ)=>{function r7(J){if(!(J instanceof this))return this.NaN;return new this(J.getReal(),J.getImaginary()*-1)}aJ.exports=r7});var rJ=$((mQ,iJ)=>{function J9(J){if(!(J instanceof this))return this.NaN;return this.divide(this.ONE,J)}iJ.exports=J9});var YY=$((sQ,JY)=>{function Y9(J,Y){if(!(J instanceof this)||!(Y instanceof this))return this.NaN;return new this(J.re+Y.re,J.im+Y.im)}JY.exports=Y9});var ZY=$((tQ,KY)=>{function K9(J,Y){if(!(J instanceof this)||!(Y instanceof this))return this.NaN;return new this(J.re-Y.re,J.im-Y.im)}KY.exports=K9});var FY=$((nQ,GY)=>{function Z9(J,Y){if(!(J instanceof this)||!(Y instanceof this))return this.NaN;var{re:K,im:Z}=J,G=Y.re,F=Y.im;return new this(K*G-Z*F,K*F+Z*G)}GY.exports=Z9});var WY=$((oQ,QY)=>{function G9(J,Y){if(!(J instanceof this)||!(Y instanceof this))return this.NaN;var{re:K,im:Z}=J,G=Y.re,F=Y.im;if(Math.abs(G)<this.EPSILON&&Math.abs(F)<this.EPSILON)return this.NaN;var Q=Math.pow(G,2)+Math.pow(F,2);return new this((K*G+Z*F)/Q,(Z*G-K*F)/Q)}QY.exports=G9});var VY=$((aQ,XY)=>{function F9(J){if(!(J instanceof this))return this.NaN;var Y=J.getReal(),K=J.getImaginary(),Z=Math.exp(Y);return new this(Z*Math.cos(K),Z*Math.sin(K))}XY.exports=F9});var HY=$((eQ,qY)=>{function Q9(J){if(!(J instanceof this))return this.NaN;var Y=J.getModulus(),K=J.getArgument();if(Y<this.EPSILON||K===void 0)return this.NaN;return new this(Math.log(Y),K)}qY.exports=Q9});var $Y=$((iQ,UY)=>{function W9(J,Y){if(!(J instanceof this)||typeof Y!=="number"&&!(Y instanceof this))return this.NaN;if(typeof Y==="number"){if(!Number.isFinite(Y)||Number.isNaN(Y))return this.NaN;if(Y===0)return this.ONE;if(this.isEqual(J,this.ZERO))return this.ZERO;return this.exp(this.multiply(new this(Y,0),this.log(J)))}if(Y instanceof this)return this.exp(this.multiply(Y,this.log(J)));return this.NaN}UY.exports=W9});var EY=$((rQ,BY)=>{function X9(J){if(!(J instanceof this))return this.NaN;var Y=J.getReal(),K=J.getImaginary();return new this(Math.sin(Y)*Math.cosh(K),Math.cos(Y)*Math.sinh(K))}BY.exports=X9});var NY=$((JW,OY)=>{function V9(J){if(!(J instanceof this))return this.NaN;var Y=J.getReal(),K=J.getImaginary();return new this(Math.cos(Y)*Math.cosh(K),Math.sin(Y)*Math.sinh(K)*-1)}OY.exports=V9});var DY=$((YW,PY)=>{function q9(J){return this.divide(this.sin(J),this.cos(J))}PY.exports=q9});var zY=$((KW,RY)=>{function H9(J){return this.divide(this.ONE,this.sin(J))}RY.exports=H9});var kY=$((ZW,SY)=>{function U9(J){return this.divide(this.ONE,this.cos(J))}SY.exports=U9});var IY=$((GW,fY)=>{function $9(J){return this.divide(this.ONE,this.tan(J))}fY.exports=$9});var LY=$((FW,TY)=>{function B9(J){return this.multiply(new this(0,-1),this.log(this.add(this.multiply(new this(0,1),J),this.pow(this.subtract(this.ONE,this.pow(J,2)),0.5))))}TY.exports=B9});var CY=$((QW,wY)=>{function E9(J){return this.subtract(new this(Math.PI/2),this.asin(J))}wY.exports=E9});var hY=$((WW,MY)=>{function O9(J){return this.multiply(new this(0,0.5),this.subtract(this.log(this.subtract(this.ONE,this.multiply(new this(0,1),J))),this.log(this.add(this.ONE,this.multiply(new this(0,1),J)))))}MY.exports=O9});var AY=$((XW,gY)=>{function N9(J){return this.asin(this.inverse(J))}gY.exports=N9});var yY=$((VW,vY)=>{function P9(J){return this.acos(this.inverse(J))}vY.exports=P9});var bY=$((qW,jY)=>{function D9(J){return this.atan(this.inverse(J))}jY.exports=D9});var pY=$((HW,xY)=>{function Y0(J){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol")Y0=function(K){return typeof K};else Y0=function(K){return K&&typeof Symbol==="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};return Y0(J)}function z(J,Y){var K=Y0(J),Z=Y0(Y);if(K==="number"&&Z==="undefined"){if(Number.isNaN(J)||!Number.isFinite(J))return this.re=NaN,this.im=NaN,this;return this.re=J,this.im=0,this}if(K==="number"&&Z==="number"){if(Number.isNaN(J)||Number.isNaN(Y)||!Number.isFinite(J)||!Number.isFinite(Y))return this.re=NaN,this.im=NaN,this;return this.re=J,this.im=Y,this}return this.re=NaN,this.im=NaN,this}z.prototype.getReal=bJ();z.prototype.getImaginary=pJ();z.prototype.getModulus=uJ();z.prototype.getArgument=_J();z.prototype.toString=mJ();z.isNaN=tJ();z.isEqual=oJ();z.conjugate=eJ();z.inverse=rJ();z.add=YY();z.subtract=ZY();z.multiply=FY();z.divide=WY();z.exp=VY();z.log=HY();z.pow=$Y();z.sin=EY();z.cos=NY();z.tan=DY();z.csc=zY();z.sec=kY();z.cot=IY();z.asin=LY();z.acos=CY();z.atan=hY();z.acsc=AY();z.asec=yY();z.acot=bY();z.NaN=new z(NaN);z.ONE=new z(1);z.ZERO=new z(0);z.PI=new z(Math.PI);z.E=new z(Math.E);z.EPSILON=1/(Math.pow(10,15)*2);xY.exports=z});var _Y=$((UW,cY)=>{function R9(J,Y){return f9(J)||k9(J,Y)||S9(J,Y)||z9()}function z9(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S9(J,Y){if(!J)return;if(typeof J==="string")return dY(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return dY(J,Y)}function dY(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function k9(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function f9(J){if(Array.isArray(J))return J}var O0=pY(),I9=c(),T9=I(),L9=T9.INVALID_SQUARE_MATRIX;function w9(){if(!this.isSquare())throw Error(L9);if(this._eigenvalues!==void 0)return this._eigenvalues;var J=this.size()[0],Y=[],K=this._digit,Z=1/(Math.pow(10,K)*2),G=I9.clone(this)._matrix,F=!0,Q=!1;C9(G,K);for(var W=J-1;W>0;W--){var X=0,V=void 0;if(Q){Q=!1;continue}var H=G[J-1][J-1];while(!0){if(!F)V=uY(G[W-1][W-1],G[W-1][W],G[W][W-1],G[W][W]).metric;else V=Math.abs(G[W][W-1]);for(var q=0;q<J;q++)G[q][q]-=H;M9(G,K);for(var U=0;U<J;U++)G[U][U]+=H;if(F&&V<Math.abs(G[W][W-1]))X++;if(F&&Math.abs(G[W][W-1])<Z){Y[W]=new O0(G[W][W]);break}var B=uY(G[W-1][W-1],G[W-1][W],G[W][W-1],G[W][W]),E=B.metric,O=B.eigen1,N=B.eigen2;if(!F&&Math.abs(V-E)<Z){F=!0,Q=!0;var{re:P,im:S}=O,R=N.re,k=N.im;Y[W]=new O0(P,S),Y[W-1]=new O0(R,k);break}if(X>3)F=!1}}if(!Q)Y[0]=new O0(G[0][0]);return this._eigenvalues=Y,Y}function C9(J,Y){var K=J.length,Z=1/(Math.pow(10,Y)*2);for(var G=0;G<K-2;G++){var F=0,Q=Array(K-G-1);for(var W=G+1;W<K;W++){var X=J[W][G];F+=Math.pow(X,2),Q[W-G-1]=X}if(F=Math.sqrt(F),Math.abs(F)<Z)continue;if(Q[0]>=0)Q[0]+=F;else Q[0]-=F;var V=0;for(var H=0;H<Q.length;H++)V+=Math.pow(Q[H],2);V=Math.sqrt(V);for(var q=0;q<Q.length;q++)Q[q]/=V;for(var U=G;U<K;U++){var B=Array(K-G-1);for(var E=G+1;E<K;E++)B[E-G-1]=J[E][U];var O=0;for(var N=0;N<B.length;N++)O+=B[N]*Q[N];O*=2;for(var P=G+1;P<K;P++)if(U===G&&P!==G+1)J[P][U]=0;else J[P][U]=B[P-G-1]-O*Q[P-G-1]}for(var S=0;S<K;S++){var R=Array(K-G-1);for(var k=G+1;k<K;k++)R[k-G-1]=J[S][k];var f=0;for(var w=0;w<R.length;w++)f+=R[w]*Q[w];f*=2;for(var M=G+1;M<K;M++)J[S][M]=R[M-G-1]-f*Q[M-G-1]}}}function M9(J,Y){var K=J.length,Z=1/(Math.pow(10,Y)*2),G=Array(K-1);for(var F=0;F<K-1;F++){var Q=J[F][F],W=J[F+1][F],X=Math.sqrt(Math.pow(Q,2)+Math.pow(W,2));if(X<Z)continue;var V=Q/X,H=W*-1/X;G[F]=[H,V];var q=Array(K-F),U=Array(K-F);for(var B=F;B<K;B++)q[B-F]=J[F][B],U[B-F]=J[F+1][B];for(var E=F;E<K;E++)if(J[F][E]=V*q[E-F]+H*-1*U[E-F],F===E)J[F+1][E]=0;else J[F+1][E]=H*q[E-F]+V*U[E-F]}for(var O=0;O<K-1;O++){if(!G[O])continue;var N=R9(G[O],2),P=N[0],S=N[1],R=Array(O+2),k=Array(O+2);for(var f=0;f<=O+1;f++)R[f]=J[f][O],k[f]=J[f][O+1];for(var w=0;w<=O+1;w++)J[w][O]=R[w]*S-k[w]*P,J[w][O+1]=R[w]*P+k[w]*S}}function uY(J,Y,K,Z){var G=(J+Z)*-1,F=J*Z-K*Y,Q=Math.pow(G,2)-4*F,W,X,V,H;if(Q>=0){if(X=0,H=0,G>=0)W=(G*-1-Math.sqrt(Q))/2;else W=(G*-1+Math.sqrt(Q))/2;V=F/W}else W=-G/2,V=W,X=Math.sqrt(Q*-1)/2,H=X*-1;return{metric:Math.sqrt(Math.pow(W,2)+Math.pow(X,2)),eigen1:{re:W,im:X},eigen2:{re:V,im:H}}}cY.exports=w9});var mY=$(($W,lY)=>{function h9(){if(this._nullity!==void 0)return this._nullity;var J=this.size()[1],Y=this.rank();return this._nullity=J-Y,this._nullity}lY.exports=h9});var oY=$((BW,nY)=>{function g9(J,Y){return j9(J)||y9(J,Y)||v9(J,Y)||A9()}function A9(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v9(J,Y){if(!J)return;if(typeof J==="string")return sY(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return sY(J,Y)}function sY(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function y9(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function j9(J){if(Array.isArray(J))return J}var tY=c(),b9=I(),x9=b9.INVALID_P_NORM;function p9(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,Y=this.size(),K=g9(Y,2),Z=K[0],G=K[1];if(J!==1&&J!==2&&J!==1/0&&J!=="F")throw Error(x9);var F=this._matrix,Q=0;if(J===1){for(var W=0;W<G;W++){var X=0;for(var V=0;V<Z;V++)X+=Math.abs(F[V][W]);if(X>Q)Q=X}return Q}if(J===2){var H=tY.transpose(this),q=tY.multiply(H,this),U=q.eigenvalues();for(var B=0;B<U.length;B++){var E=U[B].getModulus();if(E>Q)Q=E}return Math.sqrt(Q)}if(J===1/0){for(var O=0;O<Z;O++){var N=0;for(var P=0;P<G;P++)N+=Math.abs(F[O][P]);if(N>Q)Q=N}return Q}for(var S=0;S<Z;S++)for(var R=0;R<G;R++)Q+=Math.pow(F[S][R],2);return Math.sqrt(Q)}nY.exports=p9});var iY=$((EW,eY)=>{function d9(J,Y){return l9(J)||_9(J,Y)||c9(J,Y)||u9()}function u9(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c9(J,Y){if(!J)return;if(typeof J==="string")return aY(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return aY(J,Y)}function aY(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function _9(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function l9(J){if(Array.isArray(J))return J}var m9=c();function s9(){if(this._rank!==void 0)return this._rank;var J=1/(Math.pow(10,this._digit)*2),Y=m9.QR(this)[1],K=Y._matrix,Z=Y.size(),G=d9(Z,2),F=G[0],Q=G[1];if(F===0)return this._rank=1,1;var W=0;for(var X=0;X<F;X++)for(var V=X;V<Q;V++)if(Math.abs(K[X][V])>=J){W++;break}return this._rank=W,W}eY.exports=s9});var JK=$((OW,rY)=>{function t9(){if(this._size!==void 0)return this._size;var J=this._matrix;if(J.length===0)return this._size=[0,0],this._size;return this._size=[J.length,J[0].length],this._size}rY.exports=t9});var KK=$((NW,YK)=>{var n9=I(),o9=n9.INVALID_SQUARE_MATRIX;function a9(){var J=this._isSquare!==void 0?this._isSquare:this.isSquare();if(!J)throw Error(o9);if(this._trace!==void 0)return this._trace;var Y=this._matrix,K=Y.length,Z=0;for(var G=0;G<K;G++)Z+=Y[G][G];return this._trace=Z,Z}YK.exports=a9});var WK=$((PW,QK)=>{function ZK(J,Y){return J8(J)||r9(J,Y)||i9(J,Y)||e9()}function e9(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i9(J,Y){if(!J)return;if(typeof J==="string")return GK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return GK(J,Y)}function GK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function r9(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function J8(J){if(Array.isArray(J))return J}var FK=I(),Y8=FK.INVALID_MATRIX,K8=FK.SIZE_INCOMPATIBLE;function Z8(J,Y){if(!(J instanceof this)||!(Y instanceof this))throw Error(Y8);var K=J.size(),Z=ZK(K,2),G=Z[0],F=Z[1],Q=Y.size(),W=ZK(Q,2),X=W[0],V=W[1];if(G!==X||F!==V)throw Error(K8);var H=J._matrix,q=Y._matrix;return this.generate(G,F,function(U,B){return H[U][B]+q[U][B]})}QK.exports=Z8});var VK=$((DW,XK)=>{var e0=I(),G8=e0.INVALID_MATRIX,F8=e0.INVALID_SQUARE_MATRIX,Q8=e0.SINGULAR_MATRIX,W8=c();function X8(J){if(!(J instanceof this))throw Error(G8);if(!J.isSquare())throw Error(F8);var Y=J.size()[0];if(Y===0)return new W8([]);var K=1/(Math.pow(10,J._digit)*2),Z=this.identity(Y)._matrix,G=this.clone(J)._matrix,F=V8(Y);for(var Q=0;Q<Y;Q++){var W=Q,X=G[F[Q]][Q];while(Math.abs(X)<K&&W<Y-1)W++,X=G[F[W]][Q];if(Math.abs(X)<K)throw Error(Q8);if(Q!==W){var V=F[Q];F[Q]=F[W],F[W]=V}var H=F[Q];for(var q=0;q<Y;q++){var U=F[q];if(q===Q){for(var B=0;B<Y;B++){if(B===Q)G[U][B]=1;if(B>Q)G[U][B]/=X;Z[U][B]/=X}X=1}if(q!==Q&&Math.abs(G[U][Q])>=K){var E=G[U][Q]/X;for(var O=0;O<Y;O++){if(O===Q)G[U][O]=0;if(O>Q)G[U][O]-=E*G[H][O];Z[U][O]-=E*Z[H][O]}}}}for(var N=0;N<Y;N++)G[N]=Z[F[N]];return new this(G)}function V8(J){var Y=Array(J);for(var K=0;K<J;K++)Y[K]=K;return Y}XK.exports=X8});var K0=$((RW,qK)=>{var q8=I(),H8=q8.INVALID_ROW_COL;qK.exports=function(Y,K){if(!Number.isInteger(Y)||Y<0||!Number.isInteger(K)||K<0)throw Error(H8);if(Y===0||K===0)return[];var Z=Array(Y);for(var G=0;G<Y;G++)Z[G]=Array(K);return Z}});var EK=$((zW,BK)=>{function HK(J,Y){return E8(J)||B8(J,Y)||$8(J,Y)||U8()}function U8(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $8(J,Y){if(!J)return;if(typeof J==="string")return UK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return UK(J,Y)}function UK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function B8(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function E8(J){if(Array.isArray(J))return J}var O8=K0(),$K=I(),N8=$K.INVALID_MATRIX,P8=$K.SIZE_INCOMPATIBLE;function D8(J,Y){if(!(J instanceof this)||!(Y instanceof this))throw Error(N8);var K=J.size(),Z=HK(K,2),G=Z[0],F=Z[1],Q=Y.size(),W=HK(Q,2),X=W[0],V=W[1];if(F!==X)throw Error(P8);var H=J._matrix,q=Y._matrix,U=O8(G,V);for(var B=0;B<G;B++)for(var E=0;E<V;E++){U[B][E]=0;for(var O=0;O<X;O++)U[B][E]+=H[B][O]*q[O][E]}return new this(U)}BK.exports=D8});var NK=$((SW,OK)=>{var i0=I(),R8=i0.INVALID_MATRIX,z8=i0.INVALID_SQUARE_MATRIX,S8=i0.INVALID_EXPONENT;function k8(J,Y){if(!(J instanceof this))throw Error(R8);if(!J.isSquare())throw Error(z8);if(!Number.isInteger(Y)||Y<0)throw Error(S8);var K=J.size()[0];if(Y===0)return this.identity(K);if(Y===1)return this.clone(J);if(Y%2===0){var Z=this.pow(J,Y/2);return this.multiply(Z,Z)}var G=this.pow(J,(Y-1)/2);return this.multiply(this.multiply(G,G),J)}OK.exports=k8});var SK=$((kW,zK)=>{function PK(J,Y){return L8(J)||T8(J,Y)||I8(J,Y)||f8()}function f8(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8(J,Y){if(!J)return;if(typeof J==="string")return DK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return DK(J,Y)}function DK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function T8(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function L8(J){if(Array.isArray(J))return J}var RK=I(),w8=RK.SIZE_INCOMPATIBLE,C8=RK.INVALID_MATRIX;zK.exports=function(Y,K){if(!(Y instanceof this)||!(K instanceof this))throw Error(C8);var Z=Y.size(),G=PK(Z,2),F=G[0],Q=G[1],W=K.size(),X=PK(W,2),V=X[0],H=X[1];if(F!==V||Q!==H)throw Error(w8);var q=Y._matrix,U=K._matrix;return this.generate(F,Q,function(B,E){return q[B][E]-U[B][E]})}});var IK=$((fW,fK)=>{function M8(J,Y){return v8(J)||A8(J,Y)||g8(J,Y)||h8()}function h8(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g8(J,Y){if(!J)return;if(typeof J==="string")return kK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return kK(J,Y)}function kK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function A8(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function v8(J){if(Array.isArray(J))return J}var y8=I(),j8=y8.INVALID_MATRIX;function b8(J){if(!(J instanceof this))throw Error(j8);var Y=J.size(),K=M8(Y,2),Z=K[0],G=K[1],F=J._matrix;return this.generate(G,Z,function(Q,W){return F[W][Q]})}fK.exports=b8});var wK=$((IW,LK)=>{function x8(J,Y){return c8(J)||u8(J,Y)||d8(J,Y)||p8()}function p8(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d8(J,Y){if(!J)return;if(typeof J==="string")return TK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return TK(J,Y)}function TK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function u8(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function c8(J){if(Array.isArray(J))return J}var _8=K0(),Z0=I(),l8=Z0.INVALID_MATRIX,m8=Z0.INVALID_UPPER_TRIANGULAR_MATRIX,s8=Z0.INVALID_SQUARE_MATRIX,t8=Z0.SIZE_INCOMPATIBLE,n8=Z0.NO_UNIQUE_SOLUTION;function o8(J,Y){if(!(J instanceof this)||!(Y instanceof this))throw Error(l8);if(!J.isUpperTriangular())throw Error(m8);if(!J.isSquare())throw Error(s8);var K=J.size()[0],Z=Y.size(),G=x8(Z,2),F=G[0],Q=G[1],W=J._matrix,X=Y._matrix;if(F!==K||Q!==1)throw Error(t8);var V=1/(Math.pow(10,J._digit)*2);for(var H=0;H<K;H++)if(Math.abs(W[H][H])<V)throw Error(n8);var q=_8(K,1);for(var U=K-1;U>=0;U--){var B=0;for(var E=U+1;E<K;E++)B+=q[E][0]*W[U][E];q[U][0]=(X[U][0]-B)/W[U][U]}return new this(q)}LK.exports=o8});var hK=$((TW,MK)=>{function a8(J,Y){return JG(J)||r8(J,Y)||i8(J,Y)||e8()}function e8(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i8(J,Y){if(!J)return;if(typeof J==="string")return CK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return CK(J,Y)}function CK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function r8(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function JG(J){if(Array.isArray(J))return J}var YG=K0(),G0=I(),KG=G0.INVALID_MATRIX,ZG=G0.INVALID_LOWER_TRIANGULAR_MATRIX,GG=G0.INVALID_SQUARE_MATRIX,FG=G0.SIZE_INCOMPATIBLE,QG=G0.NO_UNIQUE_SOLUTION;function WG(J,Y){if(!(J instanceof this)||!(Y instanceof this))throw Error(KG);if(!J.isLowerTriangular())throw Error(ZG);if(!J.isSquare())throw Error(GG);var K=J.size()[0],Z=Y.size(),G=a8(Z,2),F=G[0],Q=G[1],W=J._matrix,X=Y._matrix;if(K!==F||Q!==1)throw Error(FG);var V=1/(Math.pow(10,J._digit)*2);for(var H=0;H<K;H++)if(Math.abs(W[H][H])<V)throw Error(QG);var q=YG(K,1);for(var U=0;U<K;U++){var B=0;for(var E=0;E<U;E++)B+=q[E][0]*W[U][E];q[U][0]=(X[U][0]-B)/W[U][U]}return new this(q)}MK.exports=WG});var vK=$((LW,AK)=>{function r0(J,Y){return HG(J)||qG(J,Y)||VG(J,Y)||XG()}function XG(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VG(J,Y){if(!J)return;if(typeof J==="string")return gK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return gK(J,Y)}function gK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function qG(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function HG(J){if(Array.isArray(J))return J}var N0=I(),UG=N0.INVALID_MATRIX,$G=N0.NO_UNIQUE_SOLUTION,BG=N0.INVALID_SQUARE_MATRIX,EG=N0.SIZE_INCOMPATIBLE;function OG(J,Y){if(!(J instanceof this)||!(Y instanceof this))throw Error(UG);if(!J.isSquare())throw Error(BG);var K=J.size(),Z=r0(K,2),G=Z[0],F=Z[1],Q=Y.size(),W=r0(Q,2),X=W[0],V=W[1];if(F!==X||V!==1)throw Error(EG);var H=1/(Math.pow(10,J._digit)*2),q=this.LU(J,!0),U=r0(q,2),B=U[0],E=U[1],O=E._matrix,N=Y._matrix;for(var P=G-1;P>=0;P--)if(Math.abs(O[P][P])<H)throw Error($G);var S=Array(X),R=Array(X);for(var k=0;k<X;k++)S[k]=N[B[k]][0];for(var f=0;f<G;f++){var w=0;for(var M=0;M<f;M++)w+=R[M]*O[f][M];R[f]=S[f]-w}for(var T=G-1;T>=0;T--){var v=0;for(var b=T+1;b<G;b++)v+=O[T][b]*S[b];S[T]=(R[T]-v)/O[T][T]}for(var p=0;p<X;p++)R[p]=[S[p]];return new this(R)}AK.exports=OG});var bK=$((wW,jK)=>{function NG(J,Y){return zG(J)||RG(J,Y)||DG(J,Y)||PG()}function PG(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DG(J,Y){if(!J)return;if(typeof J==="string")return yK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return yK(J,Y)}function yK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function RG(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function zG(J){if(Array.isArray(J))return J}var SG=I(),kG=SG.INVALID_MATRIX;function fG(J){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(J instanceof this))throw Error(kG);var K=J.size(),Z=NG(K,2),G=Z[0],F=Z[1],Q=Math.min(G,F),W=1/(Math.pow(10,J._digit)*2),X=IG(G),V=this.clone(J)._matrix;for(var H=0;H<G-1;H++){var q=Math.min(H,F);TG(V,X,q,G,F);var U=X[H],B=V[U][q];if(Math.abs(B)<W)continue;for(var E=H+1;E<G;E++){var O=X[E],N=V[O][q];if(Math.abs(N)>=W){var P=N/B;for(var S=q;S<F;S++)V[O][S]-=P*V[U][S];V[O][q]=P}}}var R=Array(G);for(var k=0;k<G;k++)R[k]=V[X[k]];if(Y)return[X,new this(R)];var f=this.generate(G,G,function(T,v){var b=X[T];if(v===b)return 1;return 0}),w=this.generate(G,Q,function(T,v){if(T===v)return 1;if(T<v)return 0;return R[T][v]}),M=this.generate(Q,F,function(T,v){if(T>v)return 0;return R[T][v]});return[f,w,M]}function IG(J){var Y=Array(J);for(var K=0;K<J;K++)Y[K]=K;return Y}function TG(J,Y,K,Z,G){var F=Math.min(K,G),Q=K,W=Math.abs(J[Y[K]][F]);for(var X=K+1;X<Z;X++){var V=Math.abs(J[Y[X]][F]);if(V>W)Q=X,W=V}var H=Y[K];Y[K]=Y[Q],Y[Q]=H}jK.exports=fG});var dK=$((CW,pK)=>{function LG(J,Y){return hG(J)||MG(J,Y)||CG(J,Y)||wG()}function wG(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CG(J,Y){if(!J)return;if(typeof J==="string")return xK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return xK(J,Y)}function xK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function MG(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function hG(J){if(Array.isArray(J))return J}var gG=I(),AG=gG.INVALID_MATRIX;function vG(J){if(!(J instanceof this))throw Error(AG);var Y=J.size(),K=LG(Y,2),Z=K[0],G=K[1],F=Math.min(Z,G),Q=1/(Math.pow(10,J._digit)*2),W=this.clone(J)._matrix,X=this.identity(Z)._matrix;for(var V=0;V<F;V++){var H=!0;for(var q=V+1;q<Z;q++)if(Math.abs(W[q][V])>=Q){H=!1;break}if(!H){var U=0;for(var B=V;B<Z;B++)U+=Math.pow(W[B][V],2);U=Math.sqrt(U);var E=-1;if(W[V][V]<0)E=1;var O=W[V][V]-E*U,N=Array(Z-V);for(var P=0;P<Z-V;P++)N[P]=W[P+V][V]/O;N[0]=1;var S=-1*E*O/U,R=Array(Z-V);for(var k=0;k<Z-V;k++){var f=Array(G);for(var w=0;w<G;w++)f[w]=W[V+k][w];R[k]=f}for(var M=V;M<Z;M++)for(var T=0;T<G;T++){var v=0;for(var b=0;b<Z-V;b++)v+=R[b][T]*N[b];W[M][T]=R[M-V][T]-S*N[M-V]*v}var p=Array(Z);for(var m=0;m<Z;m++){var s=Array(Z-V);for(var t=0;t<Z-V;t++)s[t]=X[m][V+t];p[m]=s}for(var d=0;d<Z;d++)for(var a=V;a<Z;a++){var D1=0;for(var W0=0;W0<Z-V;W0++)D1+=p[d][W0]*N[W0];X[d][a]=p[d][a-V]-S*N[a-V]*D1}}}for(var X0=0;X0<Z;X0++)for(var V0=0;V0<G;V0++)if(X0>V0)W[X0][V0]=0;return[new this(X),new this(W)]}pK.exports=vG});var _K=$((MW,cK)=>{function yG(J,Y){return pG(J)||xG(J,Y)||bG(J,Y)||jG()}function jG(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bG(J,Y){if(!J)return;if(typeof J==="string")return uK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return uK(J,Y)}function uK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function xG(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function pG(J){if(Array.isArray(J))return J}var dG=I(),uG=dG.INVALID_MATRIX;function cG(J){if(!(J instanceof this))throw Error(uG);var Y=J.size(),K=yG(Y,2),Z=K[0],G=K[1],F=J._matrix;return this.generate(Z,G,function(Q,W){return F[Q][W]})}cK.exports=cG});var sK=$((hW,mK)=>{function _G(J,Y){return tG(J)||sG(J,Y)||mG(J,Y)||lG()}function lG(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mG(J,Y){if(!J)return;if(typeof J==="string")return lK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return lK(J,Y)}function lK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function sG(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function tG(J){if(Array.isArray(J))return J}var J1=I(),nG=J1.INVALID_ROW_COL,oG=J1.OVERFLOW_COLUMN,aG=J1.INVALID_MATRIX;function eG(J,Y){if(!(J instanceof this))throw Error(aG);if(!Number.isInteger(Y)||Y<0)throw Error(nG);var K=J.size(),Z=_G(K,2),G=Z[0],F=Z[1];if(Y>=F)throw Error(oG);var Q=J._matrix;return this.generate(G,1,function(W){return Q[W][Y]})}mK.exports=eG});var oK=$((gW,nK)=>{var Y1=c(),tK=o0(),Z1=I(),iG=Z1.INVALID_ARRAY,K1=Z1.EXPECTED_ARRAY_OF_NUMBERS_OR_MATRICES,rG=Z1.INVALID_SQUARE_MATRIX;function J6(J){if(!Array.isArray(J))throw Error(iG);var Y=J.length,K;for(var Z=0;Z<Y;Z++){var G=J[Z];if(!tK(G)&&!(G instanceof Y1))throw Error(K1);if(tK(G)){if(!K){K="number";continue}if(K!=="number")throw Error(K1)}else{if(!G.isSquare())throw Error(rG);if(!K){K="square";continue}if(K!=="square")throw Error(K1)}}if(K==="number")return Y1.generate(Y,Y,function(U,B){if(U===B)return J[U];return 0});var F=0,Q=Array(Y);for(var W=0;W<Y;W++){var X=J[W].size()[0];F+=X,Q[W]=X}var V=0,H=0,q=Q[V];return Y1.generate(F,F,function(U,B){if(U-H===q&&B-H===q)H+=q,V++;var E=U-H,O=B-H;q=Q[V];while(q===0)V++,q=Q[V];if(E<q&&E>=0&&O<q&&O>=0)return J[V]._matrix[E][O];return 0})}nK.exports=J6});var iK=$((AW,eK)=>{function Y6(J,Y){return F6(J)||G6(J,Y)||Z6(J,Y)||K6()}function K6(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z6(J,Y){if(!J)return;if(typeof J==="string")return aK(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return aK(J,Y)}function aK(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function G6(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function F6(J){if(Array.isArray(J))return J}var Q6=I(),W6=Q6.INVALID_MATRIX;function X6(J,Y){if(!(J instanceof this))throw Error(W6);var K=J.size(),Z=Y6(K,2),G=Z[0],F=Z[1],Q=J._matrix;return this.generate(G,F,function(W,X){return Y(Q[W][X])})}eK.exports=X6});var JZ=$((vW,rK)=>{var V6=K0();function q6(J,Y,K){var Z=V6(J,Y);if(J===0||Y===0)return new this([]);for(var G=0;G<J;G++)for(var F=0;F<Y;F++)Z[G][F]=K(G,F);return new this(Z)}rK.exports=q6});var ZZ=$((yW,KZ)=>{function H6(J,Y){return E6(J)||B6(J,Y)||$6(J,Y)||U6()}function U6(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $6(J,Y){if(!J)return;if(typeof J==="string")return YZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return YZ(J,Y)}function YZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function B6(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function E6(J){if(Array.isArray(J))return J}var O6=I(),N6=O6.INVALID_MATRIX;function P6(J){if(!(J instanceof this))throw Error(N6);var Y=J.size(),K=H6(Y,2),Z=K[0],G=K[1],F=Math.min(Z,G),Q=J._matrix,W=Array(F);for(var X=0;X<F;X++)W[X]=Q[X][X];return W}KZ.exports=P6});var FZ=$((jW,GZ)=>{function D6(J,Y){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,G=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.generate(J,Y,function(){return Number.parseFloat((Math.random()*(Z-K)+K).toFixed(G))})}GZ.exports=D6});var WZ=$((bW,QZ)=>{function R6(J){return this.generate(J,J,function(Y,K){if(Y===K)return 1;return 0})}QZ.exports=R6});var HZ=$((xW,qZ)=>{function XZ(J,Y){return f6(J)||k6(J,Y)||S6(J,Y)||z6()}function z6(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S6(J,Y){if(!J)return;if(typeof J==="string")return VZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return VZ(J,Y)}function VZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function k6(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function f6(J){if(Array.isArray(J))return J}var I6=I(),T6=I6.INVALID_MATRIX;function L6(J,Y){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;if(!(J instanceof this)||!(Y instanceof this))throw Error(T6);var Z=J.size(),G=XZ(Z,2),F=G[0],Q=G[1],W=Y.size(),X=XZ(W,2),V=X[0],H=X[1];if(F!==V||Q!==H)return!1;var q=1/(Math.pow(10,K)*2),U=J._matrix,B=Y._matrix;for(var E=0;E<F;E++)for(var O=0;O<Q;O++)if(Math.abs(U[E][O]-B[E][O])>=q)return!1;return!0}qZ.exports=L6});var BZ=$((pW,$Z)=>{function w6(J,Y){return g6(J)||h6(J,Y)||M6(J,Y)||C6()}function C6(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M6(J,Y){if(!J)return;if(typeof J==="string")return UZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return UZ(J,Y)}function UZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function h6(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function g6(J){if(Array.isArray(J))return J}var G1=I(),A6=G1.INVALID_ROW_COL,v6=G1.OVERFLOW_ROW,y6=G1.INVALID_MATRIX;function j6(J,Y){if(!(J instanceof this))throw Error(y6);if(!Number.isInteger(Y)||Y<0)throw Error(A6);var K=J.size(),Z=w6(K,2),G=Z[0],F=Z[1];if(Y>=G)throw Error(v6);var Q=J._matrix;return this.generate(1,F,function(W,X){return Q[Y][X]})}$Z.exports=j6});var DZ=$((dW,PZ)=>{function F1(J,Y){return d6(J)||p6(J,Y)||x6(J,Y)||b6()}function b6(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x6(J,Y){if(!J)return;if(typeof J==="string")return EZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return EZ(J,Y)}function EZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function p6(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function d6(J){if(Array.isArray(J))return J}function F0(J){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol")F0=function(K){return typeof K};else F0=function(K){return K&&typeof Symbol==="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};return F0(J)}var _=I(),u6=_.INVALID_MATRIX,c6=_.EXPECTED_STRING_NUMBER_AT_POS_1_2,Q1=_.INVALID_ROW,W1=_.INVALID_COLUMN,X1=_.OVERFLOW_ROW,OZ=_.INVALID_ROWS_EXPRESSION,NZ=_.INVALID_COLUMNS_EXPRESSION,V1=_.OVERFLOW_COLUMN;function _6(J,Y,K){if(!(J instanceof this))throw Error(u6);var Z=F0(Y),G=F0(K);if(Z!=="string"&&Z!=="number"||G!=="string"&&G!=="number")throw Error(c6);var F=J.size(),Q=F1(F,2),W=Q[0],X=Q[1],V,H,q,U;if(Z==="number"){if(!Number.isInteger(Y)||Y<0)throw Error(Q1);if(Y>=W)throw Error(X1);V=Y,H=Y}else{var B=Y.split(":");if(B.length!==2)throw Error(OZ);var E=F1(B,2),O=E[0],N=E[1];if(O==="")V=0;else{var P=Number(O);if(!Number.isInteger(P)||P<0)throw Error(Q1);if(P>=W)throw Error(X1);V=P}if(N==="")H=W-1;else{var S=Number(N);if(!Number.isInteger(S)||S<0)throw Error(Q1);if(S>=W)throw Error(X1);H=S}if(V>H)throw Error(OZ)}if(G==="number"){if(!Number.isInteger(K)||K<0)throw Error(W1);if(K>=X)throw Error(V1);q=K,U=K}else{var R=K.split(":");if(R.length!==2)throw Error(NZ);var k=F1(R,2),f=k[0],w=k[1];if(f==="")q=0;else{var M=Number(f);if(!Number.isInteger(M)||M<0)throw Error(W1);if(M>=X)throw Error(V1);q=M}if(w==="")U=X-1;else{var T=Number(w);if(!Number.isInteger(T)||T<0)throw Error(W1);if(T>=X)throw Error(V1);U=T}if(q>U)throw Error(NZ)}var v=J._matrix,b=H-V+1,p=U-q+1,m=Array(b);for(var s=V;s<=H;s++){var t=Array(p);for(var d=q;d<=U;d++)t[d-q]=v[s][d];m[s-V]=t}return new this(m)}PZ.exports=_6});var zZ=$((uW,RZ)=>{function l6(J,Y){if(Y===void 0)return this.generate(J,J,function(){return 0});return this.generate(J,Y,function(){return 0})}RZ.exports=l6});var kZ=$((cW,SZ)=>{var m6=I(),s6=m6.SIZE_INCOMPATIBLE;function t6(J,Y,K){if(Y*K!==J.length)throw Error(s6);return this.generate(Y,K,function(Z,G){return J[Z*K+G]})}SZ.exports=t6});var TZ=$((_W,IZ)=>{function n6(J,Y){return i6(J)||e6(J,Y)||a6(J,Y)||o6()}function o6(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a6(J,Y){if(!J)return;if(typeof J==="string")return fZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return fZ(J,Y)}function fZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function e6(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function i6(J){if(Array.isArray(J))return J}function r6(){var J=this.size(),Y=n6(J,2),K=Y[0],Z=Y[1],G=K*Z,F=Array(G);for(var Q=0;Q<K;Q++)for(var W=0;W<Z;W++)F[Q*Z+W]=this._matrix[Q][W];return F}IZ.exports=r6});var MZ=$((lW,CZ)=>{function JF(J,Y){return GF(J)||ZF(J,Y)||KF(J,Y)||YF()}function YF(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KF(J,Y){if(!J)return;if(typeof J==="string")return LZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return LZ(J,Y)}function LZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function ZF(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function GF(J){if(Array.isArray(J))return J}var wZ=I(),FF=wZ.INVALID_ROW_COL,QF=wZ.OVERFLOW_INDEX;function WF(J,Y){if(!Number.isInteger(J)||J<0||!Number.isInteger(Y)||Y<0)throw Error(FF);var K=this._matrix,Z=this.size(),G=JF(Z,2),F=G[0],Q=G[1];if(J>=F||Y>=Q)throw Error(QF);return K[J][Y]}CZ.exports=WF});var AZ=$((mW,gZ)=>{function XF(J,Y){return UF(J)||HF(J,Y)||qF(J,Y)||VF()}function VF(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qF(J,Y){if(!J)return;if(typeof J==="string")return hZ(J,Y);var K=Object.prototype.toString.call(J).slice(8,-1);if(K==="Object"&&J.constructor)K=J.constructor.name;if(K==="Map"||K==="Set")return Array.from(J);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return hZ(J,Y)}function hZ(J,Y){if(Y==null||Y>J.length)Y=J.length;for(var K=0,Z=Array(Y);K<Y;K++)Z[K]=J[K];return Z}function HF(J,Y){var K=J==null?null:typeof Symbol<"u"&&J[Symbol.iterator]||J["@@iterator"];if(K==null)return;var Z=[],G=!0,F=!1,Q,W;try{for(K=K.call(J);!(G=(Q=K.next()).done);G=!0)if(Z.push(Q.value),Y&&Z.length===Y)break}catch(X){F=!0,W=X}finally{try{if(!G&&K.return!=null)K.return()}finally{if(F)throw W}}return Z}function UF(J){if(Array.isArray(J))return J}function $F(){var J=this._matrix,Y=this.size(),K=XF(Y,2),Z=K[0],G=K[1],F="";for(var Q=0;Q<Z;Q++){for(var W=0;W<G;W++)if(F+=J[Q][W].toString(),W!==G-1)F+=" ";if(Q!==Z-1)F+=`
`}return F}gZ.exports=$F});var c=$((sW,vZ)=>{var BF=UJ(),EF=I(),OF=EF.INVALID_MATRIX;function D(J){if(!BF(J))throw Error(OF);this._matrix=J,this._digit=8}vZ.exports=D;D.prototype.isDiagonal=OJ();D.prototype.isSkewSymmetric=PJ();D.prototype.isSquare=RJ();D.prototype.isSymmetric=SJ();D.prototype.isLowerTriangular=IJ();D.prototype.isUpperTriangular=wJ();D.prototype.isOrthogonal=MJ();D.prototype.cond=gJ();D.prototype.det=yJ();D.prototype.eigenvalues=_Y();D.prototype.nullity=mY();D.prototype.norm=oY();D.prototype.rank=iY();D.prototype.size=JK();D.prototype.trace=KK();D.add=WK();D.inverse=VK();D.multiply=EK();D.pow=NK();D.subtract=SK();D.transpose=IK();D.backward=wK();D.forward=hK();D.solve=vK();D.LU=bK();D.QR=dK();D.clone=_K();D.column=sK();D.diag=oK();D.elementwise=iK();D.generate=JZ();D.getDiag=ZZ();D.getRandomMatrix=FZ();D.identity=WZ();D.isEqual=HZ();D.row=BZ();D.submatrix=DZ();D.zero=zZ();D.fromArray=kZ();D.prototype.flatten=TZ();D.prototype.entry=MZ();D.prototype.toString=AZ()});var I0={},T0={};function z1(J,Y){I0[J]=Y}function S1(J,Y){T0[J]=Y}function q0(J){if(typeof I0[J.name]!=="function")throw TypeError(`The provided observation model name (${J.name}) is not registered`);return I0[J.name](J)}function H0(J,Y){if(typeof T0[J.name]!=="function")throw TypeError(`The provided dynamic model (${J.name}) name is not registered`);return T0[J.name](J,Y)}var B0={};R1(B0,{shorttermConstantSpeed:()=>l0,constantSpeedDynamic:()=>i,constantSpeed:()=>d0,constantPositionWithNull:()=>_0,constantPosition:()=>p0,constantAcceleration:()=>u0,composition:()=>c0});var x0=g(A(),1);function p0(J,Y){let{dimension:K}=J,Z=Y.dimension,{observedProjection:G}=Y,{stateProjection:F}=Y,{covariance:Q}=J;if(!J.dimension){if(Z)K=Z;else if(G)K=G[0].length;else if(F)K=F[0].length}let W=x0.identity(K);return Q||=x0.identity(K),{...J,dimension:K,transition:W,covariance:Q}}var WJ=g(A(),1);function d0(J,Y){let K=J.timeStep||1,{observedProjection:Z}=Y,{stateProjection:G}=Y,F=Y.dimension,Q;if(G&&Number.isInteger(G[0].length/2))Q=Y.stateProjection[0].length;else if(Z)Q=Z[0].length*2;else if(F)Q=F*2;else throw Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");let W=Q/2,X=WJ.identity(Q);for(let q=0;q<W;q++)X[q][q+W]=K;let V=Array(W).fill(1).concat(Array(W).fill(K*K)),H=J.covariance||V;return{...J,dimension:Q,transition:X,covariance:H}}var XJ=g(A(),1);function u0(J,Y){let K=J.timeStep||1,{observedProjection:Z}=Y,{stateProjection:G}=Y,F=Y.dimension,Q;if(G&&Number.isInteger(G[0].length/3))Q=Y.stateProjection[0].length;else if(Z)Q=Z[0].length*3;else if(F)Q=F*3;else throw Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");let W=Q/3,X=XJ.identity(Q);for(let q=0;q<W;q++)X[q][q+W]=K,X[q][q+2*W]=0.5*K**2,X[q+W][q+2*W]=K;let V=Array(W).fill(1).concat(Array(W).fill(K*K)).concat(Array(W).fill(K**4)),H=J.covariance||V;return{...J,dimension:Q,transition:X,covariance:H}}function c0({perName:J},Y){let{observedProjection:K}=Y,Z=K[0].length,G=Object.keys(J),F={},Q=Z,W=0;G.forEach((H)=>{let q=J[H].obsDynaIndexes;if(typeof J[H].name==="string"&&J[H].name!==H)throw Error(`${J[H].name} and "${H}" should match`);J[H].name=H;let{dimension:U,transition:B,covariance:E,init:O}=H0(J[H],Y),N=[];for(let P=0;P<U;P++){let S=P<q.length,R;if(S){if(R=W,R!==q[P])throw Error("thsoe should match");W++}else R=Q,Q++;N.push(R)}F[H]={dynamicIndexes:N,transition:B,dimension:U,covariance:E,init:O}});let X=G.map((H)=>F[H].dimension).reduce((H,q)=>H+q,0);if(Q!==X)throw Error("miscalculation of transition");let V={index:-1,mean:Array(X),covariance:Array(X).fill(0).map(()=>Array(X).fill(0))};return G.forEach((H)=>{let{dynamicIndexes:q,init:U}=F[H];if(typeof U!=="object")throw TypeError("Init is mandatory");q.forEach((B,E)=>q.forEach((O,N)=>{V.covariance[B][O]=U.covariance[E][N]})),q.forEach((B,E)=>{V.mean[B]=U.mean[E]})}),{dimension:X,init:V,transition(H){let{previousCorrected:q}=H,U=Array(X).fill(void 0).map(()=>Array(X).fill(0));return G.forEach((B)=>{let{dynamicIndexes:E,transition:O}=F[B],N={...H,previousCorrected:q.subState(E)},P=O(N);E.forEach((S,R)=>E.forEach((k,f)=>{U[S][k]=P[R][f]}))}),U},covariance(H){let{previousCorrected:q}=H,U=Array(X).fill(void 0).map(()=>Array(X).fill(0));return G.forEach((B)=>{let{dynamicIndexes:E,covariance:O}=F[B],N={...H,previousCorrected:q.subState(E)},P=O(N);E.forEach((S,R)=>E.forEach((k,f)=>{U[S][k]=P[R][f]}))}),U}}}var e=g(A(),1),Q7=1e6;function _0({staticCovariance:J,obsDynaIndexes:Y,init:K}){let Z=Y.length;if(K||={mean:Array(Y.length).fill(0).map(()=>[0]),covariance:e.diag(Array(Y.length).fill(Q7)),index:-1},J&&J.length!==Z)throw Error("staticCovariance has wrong size");return{dimension:Z,transition(){return e.identity(Z)},covariance({previousCorrected:G,index:F}){let Q=F-G.index;if(J)return J.map((W)=>W.map((X)=>X*Q));return e.identity(Z)},init:K}}var $0=g(A(),1);function i(J,Y){let{staticCovariance:K,avSpeed:Z,center:G}=J,F=Y.observedProjection[0].length,Q=2*F;if(G===void 0)throw TypeError("Center must be defined");if(G.length!==F)throw TypeError(`Center size should be ${F}`);if(Z.length!==F)throw TypeError(`avSpeed size should be ${F}`);let W=$0.diag(G.map((q)=>q*q/3).concat(Z.map((q)=>q*q/3)));return{init:{mean:G.map((q)=>[q]).concat(G.map(()=>[0])),covariance:W,index:-1},dimension:Q,transition:(q)=>{let{getTime:U,index:B,previousCorrected:E}=q,O=U(B)-U(E.index);if(typeof O!=="number"||Number.isNaN(O))throw TypeError(`dT (${O}) should be a number`);let N=$0.diag(G.map(()=>1).concat(G.map(()=>1)));for(let P=0;P<F;P++)N[P][F+P]=O;if(Number.isNaN(N[0][2]))throw TypeError("nan mat");return N},covariance:(q)=>{let{index:U,previousCorrected:B,getTime:E}=q,O=E(U)-E(B.index);if(typeof O!=="number")throw TypeError(`dT (${O}) should be a number`);let N=Math.sqrt(O);if(Number.isNaN(N))throw console.log({lastPreviousIndex:B.index,index:U}),console.log(O,B.index,U,E(U),E(B.index)),Error("Sqrt(dT) is NaN");return $0.diag(K.map((P)=>P*N))}}}var r=g(A(),1);var W7=function(J,Y){if(J===0)return 0;if(Y===0)return 1;return J/Y};function l0(J,Y){let{typicalTimes:K}=J;if(!Array.isArray(K))throw TypeError("typicalTimes must be defined");let Z=i(J,Y),{dimension:G,init:F}=Z;if(K.length!==G)throw TypeError(`typicalTimes (${K.length}) length is not as expected (${G})`);let Q=function({ratios:W,aMat:X,bMat:V}){return r.elemWise([X,V],([H,q],U,B)=>{let E=U===B?W[U]:(W[U]+W[B])/2;return E*H+(1-E)*q})};return{dimension:G,init:F,transition(W){let X=Z.transition(W),{getTime:V,index:H,previousCorrected:q}=W,U=V(H)-V(q.index),B=K.map((O)=>Math.exp(-1*U/O)),E=r.diag(r.elemWise([F.mean,q.mean],([O,N])=>W7(O,N)).reduce((O,N)=>O.concat(N)));return Q({ratios:B,aMat:X,bMat:E})},covariance(W,X){let{getTime:V,index:H,previousCorrected:q}=W,U=V(H)-V(q.index),B=K.map((O)=>Math.exp(-1*U/O)),E=Z.covariance(W);return Q({ratios:B,aMat:E,bMat:F.covariance})}}}var z0={};R1(z0,{sensorProjected:()=>q1,sensorLocalVariance:()=>n0,sensor:()=>t0});var s0=g(A(),1);var m0=g(A(),1);function E0(J,Y,K="checkShape"){if(J.length!==Y[0])throw Error(`[${K}] expected size (${Y[0]}) and length (${J.length}) does not match`);if(Y.length>1)return J.forEach((Z)=>E0(Z,Y.slice(1),K))}function y(J,Y,K="checkMatrix"){if(!Array.isArray(J))throw TypeError(`[${K}] should be a 2-level array matrix and is ${J}`);for(let Z of J)if(!Array.isArray(Z))throw TypeError(`[${K}] 1-level array should be a matrix ${JSON.stringify(J)}`);if(J.reduce((Z,G)=>Z.concat(G)).some((Z)=>Number.isNaN(Z)))throw Error(`[${K}] Matrix should not have a NaN
In : 
`+J.join(`
`));if(Y)E0(J,Y,K)}function n(J){if(J===void 0)return"undefined";let Y="";if(Y=typeof J==="function"?J.toString():JSON.stringify(J),Y.length<100)return Y;return Y.slice(0,97)+"..."}class J0{constructor(){throw Error("do not constuct me")}dummy(){}static assertNotArray(J,Y="parameter"){if(Array.isArray(J))throw TypeError(`E001 ${Y} cannot be an array. current value is ${n(J)}.`)}static assertIsArray2D(J,Y="parameter"){if(!Array.isArray(J))throw TypeError(`E002 ${Y} is not an array. current value is ${n(J)}.`);if(J.length===0)return;if(!Array.isArray(J[0]))throw TypeError(`E003 ${Y} must be an array of array. current value is ${n(J)}.`)}static assertIsArray2DOrFnc(J,Y="parameter"){if(typeof J==="function")return;J0.assertIsArray2D(J,Y)}static assertIsNumbersArray(J,Y="parameter"){if(typeof J==="number")return;if(!J0.isArray(J))throw TypeError(`E004 ${Y} is not an array. current value is ${n(J)}.`);if(J.length===0)return;if(typeof J[0]==="number")return;if(!J0.isArray(J[0]))throw TypeError(`E005 ${Y} is not an array of array. current value is ${n(J)}.`);if(typeof J[0][0]!=="number")throw TypeError(`E006 ${Y} is not an array of array of number. current value is ${n(J)}.`)}static isArray2D(J){if(!Array.isArray(J))return!1;return Array.isArray(J[0])}static isArray1D(J){if(!Array.isArray(J))return!1;return typeof J[0]==="number"}static isArray(J){if(!Array.isArray(J))return!1;return!0}static isFunction(J){if(typeof J==="function")return!0;return!1}}var j=J0;function u(J,Y={}){let{dimension:K,title:Z="polymorph"}=Y;if(typeof J==="number"||Array.isArray(J)){if(typeof J==="number"&&typeof K==="number")return m0.diag(Array(K).fill(J));if(j.isArray2D(J)){let G;if(typeof K==="number")G=[K,K];return y(J,G,Z),J}if(j.isArray1D(J))return m0.diag(J)}return J}var X7=(J)=>J.map((Y)=>Y.concat());function t0(J){let{sensorDimension:Y=1,sensorCovariance:K=1,nSensors:Z=1}=J,G=u(K,{dimension:Y});if(j.isFunction(G))throw TypeError("sensorCovarianceFormatted can not be a function here");y(G,[Y,Y],"observation.sensorCovariance");let F=s0.identity(Y),Q=[],W=Y*Z,X=s0.identity(W);for(let V=0;V<Z;V++){Q=Q.concat(X7(F));for(let[H,q]of G.entries())for(let[U,B]of q.entries())X[H+V*Y][U+V*Y]=B}return{...J,dimension:W,observedProjection:Q,covariance:X}}var VJ=g(A(),1);function n0(J){let{dimension:Y,observedProjection:K,covariance:Z}=q0({...J,name:"sensor"});return{dimension:Y,observedProjection:K,covariance(G){let F=VJ.identity(Y),{variance:Q}=G;return Q.forEach((W,X)=>{F[X][X]=W*Z[X][X]}),F}}}var R0=g(A(),1);var yZ=g(c(),1);var NF=0.1,PF=function(J,Y=0.0000000001){let Z=new yZ.default(J).eigenvalues();for(let G of Z)if(G<=-Y)throw console.log(J,G),Error(`Eigenvalue should be positive (actual: ${G})`);console.log("is definite positive",J)},DF=function(J,Y="checkSymetric"){for(let[K,Z]of J.entries())for(let[G,F]of Z.entries())if(K===G&&F<0)throw Error(`[${Y}] Variance[${G}] should be positive (actual: ${F})`);else if(Math.abs(F)>Math.sqrt(J[K][K]*J[G][G]))throw console.log(J),Error(`[${Y}] Covariance[${K}][${G}] should verify Cauchy Schwarz Inequality (expected: |x| <= sqrt(${J[K][K]} * ${J[G][G]}) actual: ${F})`);else if(Math.abs(F-J[G][K])>NF)throw Error(`[${Y}] Covariance[${K}][${G}] should equal Covariance[${G}][${K}]  (actual diff: ${Math.abs(F-J[G][K])})  = ${F} - ${J[G][K]}
${J.join(`
`)} is invalid`)};function l(J,Y){let{covariance:K,eigen:Z=!1}=J;if(y(K),DF(K),Z)PF(K)}function P0({correlation:J,variance:Y}){return l({covariance:J}),J.map((K,Z)=>K.map((G,F)=>G*Math.sqrt(Y[F]*Y[Z])))}function D0(J){l({covariance:J});let Y=J.map((K,Z)=>J[Z][Z]);return{variance:Y,correlation:J.map((K,Z)=>K.map((G,F)=>G/Math.sqrt(Y[F]*Y[Z])))}}function q1({selectedCovariance:J,totalDimension:Y,obsIndexes:K,selectedStateProjection:Z}){if(!Z)Z=Array(K.length).fill(0).map(()=>Array(K.length).fill(0)),K.forEach((V,H)=>{Z[H][H]=1});else if(Z.length!==K.length)throw Error(`[Sensor-projected] Shape mismatch between ${Z.length} and ${K.length}`);let G=R0.identity(Y);K.forEach((V,H)=>{if(J)K.forEach((q,U)=>{G[V][q]=J[H][U]})});let{correlation:F,variance:Q}=D0(G),W=Z[0].length;if(Z.length!==K.length)throw Error(`shape mismatch (${Z.length} vs ${K.length})`);let X=R0.matPermutation({outputSize:[Y,W],colIndexes:Z[0].map((V,H)=>H),rowIndexes:K,matrix:Z});return{dimension:Y,observedProjection:X,covariance(V){let{variance:H}=V;if(!H)return G;if(H.length!==G.length)throw Error("variance is difference size from baseCovariance");return P0({correlation:F,variance:Q.map((U,B)=>H[B]*U)})}}}var dZ=g(A(),1);function Q0(J){let{observation:Y,dimension:K}=J;if(!Array.isArray(Y)){if(K===1&&typeof Y==="number")return[[Y]];throw TypeError(`The observation (${Y}) should be an array (dimension: ${K})`)}if(Y.length!==K)throw TypeError(`Observation (${Y.length}) and dimension (${K}) not matching`);if(typeof Y[0]==="number"||Y[0]===null)return Y.map((Z)=>[Z]);return Y}function H1(J){let{observation:Y,dynamic:K}=J,{stateProjection:Z}=Y,{transition:G}=K,F=K.dimension,Q=Y.dimension;if(F&&Q&&Array.isArray(Z)&&(F!==Z[0].length||Q!==Z.length))throw TypeError("stateProjection dimensions not matching with observation and dynamic dimensions");if(F&&Array.isArray(G)&&F!==G.length)throw TypeError("transition dimension not matching with dynamic dimension");if(Array.isArray(Z))return{observation:{...Y,dimension:Z.length},dynamic:{...K,dimension:Z[0].length}};if(Array.isArray(G))return{observation:Y,dynamic:{...K,dimension:G.length}};return{observation:Y,dynamic:K}}function U1(J){let{observation:Y,dynamic:K}=J,Z=K.dimension,G=Y.dimension;if(!Z||!G)throw TypeError("Dimension is not set");return{observation:Y,dynamic:K}}var $1=g(A(),1),jZ=g(A(),1);function B1(J){let{observation:Y,dynamic:K}=J,{observedProjection:Z,stateProjection:G}=Y,F=Y.dimension,Q=K.dimension;if(Z&&G)throw TypeError("You cannot use both observedProjection and stateProjection");if(Z){let W=$1.padWithZeroCols(Z,{columns:Q});return{observation:{...Y,stateProjection:W},dynamic:K}}if(F&&Q&&!G){let W=jZ.identity(F);return{observation:{...Y,stateProjection:$1.padWithZeroCols(W,{columns:Q})},dynamic:K}}return{observation:Y,dynamic:K}}var bZ=g(A(),1);function E1(J){let{observation:Y,dynamic:K}=J;if(!K.init){let F=K.dimension,Q=Array(F).fill(0),W=Array(F).fill(1e6);return{observation:Y,dynamic:{...K,init:{mean:Q.map((V)=>[V]),covariance:bZ.diag(W),index:-1}}}}if(K.init&&!K.init.mean)throw Error("dynamic.init should have a mean key");let Z=u(K.init.covariance,{dimension:K.dimension});if(j.isFunction(Z))throw TypeError("covariance can not be a function");return K.init={...K.init,covariance:Z},{observation:Y,dynamic:K}}function o(J,{label:Y=""}={}){if(typeof J==="function")return J;if(Array.isArray(J))return J;throw Error(`${Y===null?"":Y+" : "}Only arrays and functions are authorized (got: "${J}")`)}function O1(J){return J.filter((Y,K)=>J.indexOf(Y)===K)}var xZ=100;function pZ(J,Y){if(Y>xZ)throw Error(`In deepAssign, number of recursive call (${Y}) reached limit (${xZ}), deepAssign is not working on  self-referencing objects`);let K=J.filter((X)=>X!==void 0&&X!==null),Z=K.at(-1);if(K.length===1)return K[0];if(typeof Z!=="object"||Array.isArray(Z))return Z;if(K.length===0)return null;let G=K.filter((X)=>typeof X==="object"),F=[];for(let X of G)F=F.concat(Object.keys(X));let Q=O1(F),W={};for(let X of Q){let V=G.map((H)=>H[X]);W[X]=pZ(V,Y+1)}return W}function N1(...J){return pZ(J,0)}var C=g(A(),1);class h{mean;covariance;index;constructor(J){this.mean=J.mean,this.covariance=J.covariance,this.index=J.index||void 0}check(J){h.check(this,J)}static check(J,Y={}){let{dimension:K,title:Z,eigen:G}=Y;if(!(J instanceof h))throw TypeError(`The argument is not a state 
Tips: maybe you are using 2 different version of kalman-filter in your npm deps tree`);let{mean:F,covariance:Q}=J,W=F.length;if(typeof K==="number"&&W!==K)throw Error(`[${Z}] State.mean ${F} with dimension ${W} does not match expected dimension (${K})`);y(F,[W,1],Z?Z+".mean":"mean"),y(Q,[W,W],Z?Z+".covariance":"covariance"),l({covariance:Q,eigen:G},Z?Z+".covariance":"covariance")}static matMul(J){let{state:Y,matrix:K}=J,Z=C.matMul(C.matMul(K,Y.covariance),C.transpose(K)),G=C.matMul(K,Y.mean);return new h({mean:G,covariance:Z,index:Y.index})}subState(J){return new h({mean:J.map((K)=>this.mean[K]),covariance:C.subSquareMatrix(this.covariance,J),index:this.index})}rawDetailedMahalanobis(J){let Y=C.subtract(this.mean,J);this.check();let K=C.invert(this.covariance);if(K===null)throw this.check({eigen:!0}),Error(`Cannot invert covariance ${JSON.stringify(this.covariance)}`);let Z=C.transpose(Y),G=C.matMul(C.matMul(Z,K),Y),F=Math.sqrt(G[0][0]);if(Number.isNaN(F)){let Q=C.matMul(C.matMul(Z,K),Y);throw console.log({diff:Y,covarianceInvert:K,this:this,point:J},Q),Error("mahalanobis is NaN")}return{diff:Y,covarianceInvert:K,value:F}}detailedMahalanobis(J){let{kf:Y,observation:K,obsIndexes:Z}=J;if(K.length!==Y.observation.dimension)throw Error(`Mahalanobis observation ${K} (dimension: ${K.length}) does not match with kf observation dimension (${Y.observation.dimension})`);let G=Q0({observation:K,dimension:K.length});j.assertIsArray2D(Y.observation.stateProjection,"State.detailedMahalanobis");let F=Y.getValue(Y.observation.stateProjection,{}),Q=h.matMul({state:this,matrix:F});if(Array.isArray(Z))Q=Q.subState(Z),G=Z.map((W)=>G[W]);return Q.rawDetailedMahalanobis(G)}mahalanobis(J){let Y=this.detailedMahalanobis(J).value;if(Number.isNaN(Y))throw TypeError("mahalanobis is NaN");return Y}obsBhattacharyya(J){let{kf:Y,state:K,obsIndexes:Z}=J;j.assertIsArray2D(Y.observation.stateProjection,"State.obsBhattacharyya");let G=Y.getValue(Y.observation.stateProjection,{}),F=h.matMul({state:this,matrix:G}),Q=h.matMul({state:K,matrix:G});if(Array.isArray(Z))F=F.subState(Z),Q=Q.subState(Z);return F.bhattacharyya(Q)}bhattacharyya(J){let{covariance:Y,mean:K}=this,Z=C.elemWise([Y,J.covariance],([Q,W])=>(Q+W)/2),G;try{G=C.invert(Z)}catch(Q){throw console.log("Cannot invert",Z),Q}let F=C.subtract(K,J.mean);return C.matMul(C.transpose(F),C.matMul(G,F))[0][0]}}var L=g(A(),1);var RF={info:(...J)=>console.log(...J),debug(){},warn:(...J)=>console.log(...J),error:(...J)=>console.log(...J)};class S0{dynamic;observation;logger;constructor(J){let{dynamic:Y,observation:K,logger:Z=RF}=J;this.dynamic=Y,this.observation=K,this.logger=Z}getValue(J,Y){return typeof J==="function"?J(Y):J}getInitState(){let{mean:J,covariance:Y,index:K}=this.dynamic.init,Z=new h({mean:J,covariance:Y,index:K});return h.check(Z,{title:"dynamic.init"}),Z}getPredictedCovariance(J={}){let{previousCorrected:Y,index:K}=J;Y||=this.getInitState();let Z={previousCorrected:Y,index:K,...J},G=this.getValue(this.dynamic.transition,Z);y(G,[this.dynamic.dimension,this.dynamic.dimension],"dynamic.transition");let F=L.transpose(G),Q=L.matMul(G,Y.covariance),W=L.matMul(Q,F),X=this.getValue(this.dynamic.covariance,Z),V=L.add(X,W);return y(V,[this.dynamic.dimension,this.dynamic.dimension],"predicted.covariance"),V}predictMean(J){let Y=this.predictMeanWithoutControl(J);if(!this.dynamic.constant)return Y;let{opts:K}=J,Z=this.dynamic.constant(K);return y(Z,[this.dynamic.dimension,1],"dynamic.constant"),L.add(Y,Z)}predictMeanWithoutControl(J){let{opts:Y,transition:K}=J;if(this.dynamic.fn)return this.dynamic.fn(Y);let{previousCorrected:Z}=Y;return L.matMul(K,Z.mean)}predict(J={}){let{previousCorrected:Y,index:K}=J;if(Y||=this.getInitState(),typeof K!=="number"&&typeof Y.index==="number")K=Y.index+1;h.check(Y,{dimension:this.dynamic.dimension});let Z={...J,previousCorrected:Y,index:K},G=this.getValue(this.dynamic.transition,Z),F=this.predictMean({transition:G,opts:Z}),Q=this.getPredictedCovariance(Z),W=new h({mean:F,covariance:Q,index:K});if(this.logger.debug("Prediction done",W),Number.isNaN(W.mean[0][0]))throw TypeError("nan");return W}getGain(J){let{predicted:Y,stateProjection:K}=J,Z={index:Y.index,...J};j.assertIsArray2DOrFnc(this.observation.stateProjection,"CoreKalmanFilter.getGain"),K||=this.getValue(this.observation.stateProjection,Z);let G=this.getValue(this.observation.covariance,Z);y(G,[this.observation.dimension,this.observation.dimension],"observation.covariance");let F=L.transpose(K);y(K,[this.observation.dimension,this.dynamic.dimension],"observation.stateProjection");let Q=L.matMul(L.matMul(K,Y.covariance),F),W=L.add(Q,G);return L.matMul(L.matMul(Y.covariance,F),L.invert(W))}getCorrectedCovariance(J){let{predicted:Y,optimalKalmanGain:K,stateProjection:Z}=J,G=L.identity(Y.covariance.length);if(!Z){j.assertIsArray2D(this.observation.stateProjection,"CoreKalmanFilter.getCorrectedCovariance");let F={index:Y.index,...J};Z=this.getValue(this.observation.stateProjection,F)}return K||=this.getGain({stateProjection:Z,...J}),L.matMul(L.subtract(G,L.matMul(K,Z)),Y.covariance)}getPredictedObservation(J){let{opts:Y,stateProjection:K}=J;if(this.observation.fn)return this.observation.fn(Y);let{predicted:Z}=Y;return L.matMul(K,Z.mean)}correct(J){let{predicted:Y,observation:K}=J;if(h.check(Y,{dimension:this.dynamic.dimension}),!K)throw Error("no measure available");let Z={observation:K,predicted:Y,index:Y.index,...J};j.assertIsArray2DOrFnc(this.observation.stateProjection,"CoreKalmanFilter.correct");let G=this.getValue(this.observation.stateProjection,Z),F=this.getGain({predicted:Y,stateProjection:G,...J}),Q=L.subtract(K,this.getPredictedObservation({stateProjection:G,opts:Z})),W=L.add(Y.mean,L.matMul(F,Q));if(Number.isNaN(W[0][0]))throw console.log({optimalKalmanGain:F,innovation:Q,predicted:Y}),TypeError("Mean is NaN after correction");let X=this.getCorrectedCovariance({predicted:Y,optimalKalmanGain:F,stateProjection:G,...J}),V=new h({mean:W,covariance:X,index:Y.index});return this.logger.debug("Correction done",V),V}}var zF=function(J){if(typeof J==="string")return{name:J};return{name:"constant-position"}},SF=function(J){if(typeof J==="number")return{name:"sensor",sensorDimension:J};if(typeof J==="string")return{name:J};return{name:"sensor"}},kF=function(J){let{observation:Y,dynamic:K}=J;if(typeof Y!=="object"||Y===null)Y=SF(Y);if(typeof K!=="object"||K===null)K=zF(K);if(typeof Y.name==="string")Y=q0(Y);if(typeof K.name==="string")K=H0(K,Y);let Z=H1({observation:Y,dynamic:K}),G=U1(Z),F=B1(G);return E1(F)},fF=function(J){let{observation:Y,dynamic:K}=J;return j.assertNotArray(Y,"modelsParametersToCoreOptions: observation"),N1(J,{observation:{stateProjection:o(u(Y.stateProjection),{label:"observation.stateProjection"}),covariance:o(u(Y.covariance,{dimension:Y.dimension}),{label:"observation.covariance"})},dynamic:{transition:o(u(K.transition),{label:"dynamic.transition"}),covariance:o(u(K.covariance,{dimension:K.dimension}),{label:"dynamic.covariance"})}})};class P1 extends S0{constructor(J={}){let Y=kF(J),K=fF(Y);super({...J,...K})}correct(J){let Y=Q0({observation:J.observation,dimension:this.observation.dimension});return super.correct({...J,observation:Y})}filter(J){let Y=super.predict(J);return this.correct({...J,predicted:Y})}filterAll(J){let Y=this.getInitState(),K=[];for(let Z of J){let G=this.predict({previousCorrected:Y});Y=this.correct({predicted:G,observation:Z}),K.push(Y.mean.map((F)=>F[0]))}return K}asymptoticStateCovariance({limitIterations:J=100,tolerance:Y=0.000001}={}){let K=super.getInitState(),Z=[];for(let G=0;G<J;G++){let F=new h({mean:[],covariance:super.getPredictedCovariance({previousCorrected:K})});if(K=new h({mean:[],covariance:super.getCorrectedCovariance({predicted:F})}),Z.push(K.covariance),dZ.frobenius(K.covariance,Z[G-1])<Y)return Z[G]}throw Error("The state covariance does not converge asymptotically")}asymptoticGain({tolerance:J=0.000001}={}){let Y=this.asymptoticStateCovariance({tolerance:J}),K=new h({mean:Array.from({length:Y.length}).fill(0).map(()=>[0]),covariance:Y});return super.getGain({predicted:K})}}function uZ({measures:J,averages:Y}){let K=J.length,Z=J[0].length;if(K===0)throw Error("Cannot find covariance for empty sample");return Array(Z).fill(1).map((G,F)=>Array(Z).fill(1).map((Q,W)=>{let V=J.map((H,q)=>(H[F]-Y[q][F])*(H[W]-Y[q][W])).reduce((H,q)=>H+q)/K;if(Number.isNaN(V))throw TypeError("result is NaN");return V}))}var k0=g(A(),1);function cZ({observation:J,obsIndexes:Y,selectedStateProjection:K,invertSelectedStateProjection:Z}){if(!J)return null;let G=J.observation||J,F=Y.map((X)=>{if(G[X]===void 0)throw TypeError(`obsIndexes (${Y}) is not matching with observation (${J})`);return[G[X]]}),Q=Z||k0.invert(K);if(Q===null)throw Error("selectedStateProjection is not invertible, please provide invertSelectedStateProjection");return k0.matMul(Q,F).map((X)=>X[0]).map((X)=>{if(Number.isNaN(X))throw TypeError("NaN in projection");return X})}function _Z(J){if(J===J.toLowerCase())return J;return J.replaceAll(/[A-Z]/g,(Y)=>"-"+Y.toLowerCase())}Object.keys(B0).forEach((J)=>{S1(_Z(J),B0[J])});Object.keys(z0).forEach((J)=>{z1(_Z(J),z0[J])});export{l0 as shorttermConstantSpeed,q1 as sensorProjected,n0 as sensorLocalVariance,t0 as sensor,z1 as registerObservation,S1 as registerDynamic,cZ as projectObservation,uZ as getCovariance,D0 as covarianceToCorrelation,P0 as correlationToCovariance,i as constantSpeedDynamic,d0 as constantSpeed,_0 as constantPositionWithNull,p0 as constantPosition,u0 as constantAcceleration,c0 as composition,l as checkCovariance,q0 as buildObservation,H0 as buildDynamic,h as State,P1 as KalmanFilter};

//# debugId=D419DAA626069A2364756E2164756E21
//# sourceMappingURL=index.js.map
